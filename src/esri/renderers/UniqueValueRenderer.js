//>>built
define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(i,f,g,l,m,j,h,k){return i(k,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(b,a,c,e,d){this.values=[];this._symbols={};this.infos=[];if(b&&!b.declaredClass){a=b;if(b=a.defaultSymbol)this.defaultSymbol=h.fromJson(b);this.attributeField=a.field1;this.attributeField2=a.field2;this.attributeField3=a.field3;this.fieldDelimiter=
a.fieldDelimiter;this.defaultLabel=a.defaultLabel;f.forEach(a.uniqueValueInfos,this._addValueInfo,this)}else this.defaultSymbol=b,this.attributeField=a,this.attributeField2=c,this.attributeField3=e,this.fieldDelimiter=d;this._multiple=!!this.attributeField2},addValue:function(b,a){this._addValueInfo(g.isObject(b)?b:{value:b,symbol:a})},removeValue:function(b){var a=f.indexOf(this.values,b);-1!==a&&(this.values.splice(a,1),delete this._symbols[b],this.infos.splice(a,1))},getSymbol:function(b){var a=
this.attributeField,c=b.attributes,e,d;if(this._multiple)return b=this.attributeField2,e=this.attributeField3,d=[],a&&d.push(c[a]),b&&d.push(c[b]),e&&d.push(c[e]),this._symbols[d.join(this.fieldDelimiter||"")]||this.defaultSymbol;a=g.isFunction(a)?a(b):c[a];return this._symbols[a]||this.defaultSymbol},_addValueInfo:function(b){var a=b.value;this.values.push(a);this.infos.push(b);var c=b.symbol;if(c&&!c.declaredClass)b.symbol=h.fromJson(c);this._symbols[a]=b.symbol},toJson:function(){var b=j.fixJson;
return b({type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:f.map(this.infos||[],function(a){a=g.mixin({},a);a.symbol=a.symbol&&a.symbol.toJson();a.value+="";return b(a)})})}})});