//>>built
define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource","esri/layers/LayerMapSource","esri/layers/TableDataSource","esri/layers/QueryDataSource","esri/layers/RasterDataSource"],function(f,l,m,n,d,g,h,i,j,k){var e=f(g,{declaredClass:"esri.layers.JoinDataSource",constructor:function(a){if(a){if(a.leftTableSource)this.leftTableSource=this._createLayerSource(a.leftTableSource);if(a.rightTableSource)this.rightTableSource=this._createLayerSource(a.rightTableSource)}},
_createLayerSource:function(a){var b;if("mapLayer"===a.type)b=new h(a);else{b={type:"dataLayer"};var c;switch(a.dataSource.type){case "table":c=new i(a.dataSource);break;case "queryTable":c=new j(a.dataSource);break;case "joinTable":c=new e(a.dataSource);break;case "raster":c=new k(a.dataSource);break;default:c=a.dataSource}b.dataSource=c;b.toJson=function(){var a={type:"dataLayer",dataSource:c.toJson()};return d.fixJson(a)}}return b},toJson:function(){var a={type:"joinTable",leftTableSource:this.leftTableSource&&
this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey},b;b="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;a.joinType=b;return d.fixJson(a)}});return e});