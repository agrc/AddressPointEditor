//>>built
define(["dojo/_base/lang","dojo/has","esri/kernel","esri/config","esri/lang","esri/WKIDUnitConversion"],function(n,o,p,l,m,h){var j=20015077/180,k=l.defaults;return{getScale:function(c,e,g){var a,d,b;if(1<arguments.length&&m.isDefined(e)&&!e.declaredClass)a=c,d=e,e=null;else{a=c.extent;d=c.width;var f=c.spatialReference;if(f)g=f.wkid,b=f.wkt}var i;g?i=h.values[h[g]]:b&&-1!==b.search(/^PROJCS/i)&&(b=/UNIT\[([^\]]+)\]\]$/i.exec(b))&&b[1]&&(i=parseFloat(b[1].split(",")[1]));return(e||a)&&d?39.37*(e||
a).getWidth()/d*(i||j)*k.screenDPI:0},getExtentForScale:function(c,e,g){var a,d,b=c.spatialReference;if(b)a=b.wkid,d=b.wkt;var f;a?f=h.values[h[a]]:d&&-1!==d.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(d))&&a[1]&&(f=parseFloat(a[1].split(",")[1]));return(g||c.extent).expand(e*c.width/(39.37*(f||j)*k.screenDPI)/(g||c.extent).getWidth())}}});