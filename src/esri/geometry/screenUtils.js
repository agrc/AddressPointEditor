//>>built
define(["dojo/_base/array","dojo/_base/lang","dojo/sniff","esri/kernel","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Extent"],function(y,C,z,D,q,A,u,v,w,x){var B=function(){return 9>z("ie")?function(b,l,m,a,g,e,f,c,h){var d=[],j=Math.round,o,p=f.length,k,i,r,n,s,t;for(o=0;o<p;o++)if(k=f[o],n=c?c(k[0][0],k[0][1],h):k[0],1<(r=k.length)){s=j((n[0]-b)*m+g);t=j((l-n[1])*a+e);n=c?c(k[1][0],k[1][1],h):k[1];i=j((n[0]-b)*
m+g);n=j((l-n[1])*a+e);d.push("M",s+","+t,"L",i+","+n);for(i=2;i<r;i++)n=c?c(k[i][0],k[i][1],h):k[i],s=j((n[0]-b)*m+g),t=j((l-n[1])*a+e),d.push(s+","+t)}else s=j((n[0]-b)*m+g),t=j((l-n[1])*a+e),d.push("M",s+","+t);return d}:function(b,l,m,a,g,e,f,c,h){var d=[],j,o,p,k,i,r,n=Math.round;for(j=0,p=f?f.length:0;j<p;j++){i=f[j];d.push("M");for(o=0,k=i?i.length:0;o<k;o++)r=c?c(i[o][0],i[o][1],h):i[o],d.push(n((r[0]-b)*m+g)+","+n((l-r[1])*a+e))}return d}}();return{toScreenPoint:function(b,l,m,a,g){var e=
b.spatialReference,f=a.spatialReference,c=a.x,a=a.y;e&&f&&!e.equals(f)&&e._canProject(f)&&(e=e.isWebMercator()?q.lngLatToXY(c,a):q.xyToLngLat(c,a,!0),c=e[0],a=e[1]);c=(c-b.xmin)*(l/b.getWidth());a=(b.ymax-a)*(m/b.getHeight());g||(c=Math.round(c),a=Math.round(a));return new A(c,a)},toScreenGeometry:function(b,l,m,a){var g=b.xmin,e=b.ymax,f=l/b.getWidth(),c=m/b.getHeight(),h=y.forEach,d=Math.round;if(a instanceof q)return new q(d((a.x-g)*f),d((e-a.y)*c));if(a instanceof w){var b=new w,j=b.points;h(a.points,
function(a,b){j[b]=[d((a[0]-g)*f),d((e-a[1])*c)]});return b}if(a instanceof x)return new x(d((a.xmin-g)*f),d((e-a.ymin)*c),d((a.xmax-g)*f),d((e-a.ymax)*f));if(a instanceof u){var b=new u,o=b.paths,p;h(a.paths,function(a,b){p=o[b]=[];h(a,function(a,b){p[b]=[d((a[0]-g)*f),d((e-a[1])*c)]})});return b}if(a instanceof v){var b=new v,k=b.rings,i;h(a.rings,function(a,b){i=k[b]=[];h(a,function(a,b){i[b]=[d((a[0]-g)*f),d((e-a[1])*c)]})});return b}},_toScreenPath:function(b,l,m,a,g,e){var f=a instanceof u,
c=b.spatialReference,h=a.spatialReference,d,j;if(c&&h&&!c.equals(h)&&c._canProject(h))c.isWebMercator()?d=q.lngLatToXY:(d=q.xyToLngLat,j=!0);return B(b.xmin,b.ymax,l/b.getWidth(),m/b.getHeight(),g,e,f?a.paths:a.rings,d,j)},toMapPoint:function(b,l,m,a){return new q(b.xmin+a.x/(l/b.getWidth()),b.ymax-a.y/(m/b.getHeight()),b.spatialReference)},toMapGeometry:function(b,l,m,a){var g=b.xmin,e=b.ymax,f=b.spatialReference,c=l/b.getWidth(),h=m/b.getHeight(),d=y.forEach;if(a instanceof q)return new q(g+a.x/
c,e-a.y/h,f);if(a instanceof w){var b=new w(f),j=b.points;d(a.points,function(a,b){j[b]=[g+a[0]/c,e-a[1]/h]});return b}if(a instanceof x)return new x(g+a.xmin/c,e-a.ymin/h,g+a.xmax/c,e-a.ymax/h,f);if(a instanceof u){var b=new u(f),o=b.paths,p;d(a.paths,function(a,b){p=o[b]=[];d(a,function(a,b){p[b]=[g+a[0]/c,e-a[1]/h]})});return b}if(a instanceof v){var b=new v(f),k=b.rings,i;d(a.rings,function(a,b){i=k[b]=[];d(a,function(a,b){i[b]=[g+a[0]/c,e-a[1]/h]})});return b}}}});