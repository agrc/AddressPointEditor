//>>built
define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/layerUtils","esri/geometry/jsonUtils","esri/geometry/scaleUtils"],function(f,k,g,e,n,o,h,l,m){var d=f(null,{declaredClass:"esri.tasks.IdentifyParameters",constructor:function(){this.layerOption=d.LAYER_OPTION_TOP},geometry:null,spatialReference:null,layerIds:null,tolerance:null,returnGeometry:!1,mapExtent:null,width:400,height:400,dpi:96,layerDefinitions:null,timeExtent:null,layerTimeOptions:null,
dynamicLayerInfos:null,toJson:function(a){var c=a&&a.geometry||this.geometry,b=this.mapExtent,d=this.spatialReference,i=this.layerIds,a={geometry:c,tolerance:this.tolerance,returnGeometry:this.returnGeometry,mapExtent:b,imageDisplay:this.width+","+this.height+","+this.dpi,maxAllowableOffset:this.maxAllowableOffset};if(c)a.geometryType=l.getJsonType(c);if(null!==d)a.sr=d.wkid||e.toJson(d.toJson());else if(c)a.sr=c.spatialReference.wkid||e.toJson(c.spatialReference.toJson());else if(b)a.sr=b.spatialReference.wkid||
e.toJson(b.spatialReference.toJson());a.layers=this.layerOption;i&&(a.layers+=":"+i.join(","));a.layerDefs=h._serializeLayerDefinitions(this.layerDefinitions);c=this.timeExtent;a.time=c?c.toJson().join(","):null;a.layerTimeOptions=h._serializeTimeOptions(this.layerTimeOptions);if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){var b=m.getScale({extent:b,width:this.width,spatialReference:b.spatialReference}),f=h._getLayersForScale(b,this.dynamicLayerInfos),j=[];g.forEach(this.dynamicLayerInfos,
function(a){if(!a.subLayerIds){var b=a.id;if((!this.layerIds||this.layerIds&&-1!==g.indexOf(this.layerIds,b))&&-1!==g.indexOf(f,b)){var c={id:b};c.source=a.source&&a.source.toJson();var d;this.layerDefinitions&&this.layerDefinitions[b]&&(d=this.layerDefinitions[b]);if(d)c.definitionExpression=d;var e;this.layerTimeOptions&&this.layerTimeOptions[b]&&(e=this.layerTimeOptions[b]);if(e)c.layerTimeOptions=e.toJson();j.push(c)}}},this);b=e.toJson(j);"[]"===b&&(b="[{}]");a.dynamicLayers=b}return a}});k.mixin(d,
{LAYER_OPTION_TOP:"top",LAYER_OPTION_VISIBLE:"visible",LAYER_OPTION_ALL:"all"});return d});