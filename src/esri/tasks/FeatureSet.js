//>>built
define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/graphic","esri/SpatialReference","esri/graphicsUtils","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(g,h,i,o,p,j,k,l,m,c,n){return g(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(a){if(a){h.mixin(this,a);var b=this.features,d=a.spatialReference,f=c.getGeometryType(a.geometryType),d=this.spatialReference=new l(d);this.geometryType=a.geometryType;if(a.fields)this.fields=
a.fields;i.forEach(b,function(a,e){var c=a.geometry&&a.geometry.spatialReference;b[e]=new k(f&&a.geometry?new f(a.geometry):null,a.symbol&&n.fromJson(a.symbol),a.attributes);b[e].geometry&&!c&&b[e].geometry.setSpatialReference(d)})}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(a){var b={};if(this.displayFieldName)b.displayFieldName=this.displayFieldName;if(this.fields)b.fields=this.fields;if(this.spatialReference)b.spatialReference=
this.spatialReference.toJson();else if(this.features[0]&&this.features[0].geometry)b.spatialReference=this.features[0].geometry.spatialReference.toJson();if(this.features[0]){if(this.features[0].geometry)b.geometryType=c.getJsonType(this.features[0].geometry);b.features=m._encodeGraphics(this.features,a)}b.exceededTransferLimit=this.exceededTransferLimit;return j.fixJson(b)}})});