//>>built
define(["dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/geometry/Extent"],function(q,s,t,r,p){return{_addFrameInfo:function(a,c){var b,d,f=2*c.origin[1],g=c.origin[0],h=a.origin.x,e=a.width,j;q.forEach(a.lods,function(a){b=Math.round(f/a.resolution);d=Math.ceil(b/e);j=Math.floor((g-h)/(e*a.resolution));if(!a._frameInfo)a._frameInfo=[d,j,j+d-1,b]})},getContainingTileCoords:function(a,c,b){var d=a.origin,b=b.resolution;return{row:Math.floor((d.y-c.y)/(a.height*b)),col:Math.floor((c.x-
d.x)/(a.width*b))}},getCandidateTileInfo:function(a,c,b){var d;d=a.width;for(var f=a.height,g=b.xmax-b.xmin,h=b.ymax-b.ymin,e=a.__tileInfo===c,j=e?a.getMinZoom():-1,e=e?a.getMaxZoom():-1,k=-1,l=c.lods,m=Math.abs,i,n,o,e=-1<e?e:l.length-1,j=-1<j?j:0;j<=e;j++)if(n=l[j])if(o=g>h?m(h-f*n.resolution):m(g-d*n.resolution),0>k||o<=k)i=n,k=o;else break;d=i;i=d.resolution;f=(b.xmin+b.xmax)/2;g=(b.ymin+b.ymax)/2;h=a.width/2*i;i*=a.height/2;f=new p(f-h,g-i,f+h,g+i,b.spatialReference);b=new r(f.xmin,f.ymax,b.spatialReference);
e=d.resolution;h=c.width;g=c.height;c=c.origin;a=a.__visibleDelta;i=Math.floor;l=h*e;m=g*e;e=i((c.y-b.y)/m);k=i((b.x-c.x)/l);j=c.y-e*m;c=i(Math.abs((b.x-(c.x+k*l))*h/l))+a.x;a=i(Math.abs((b.y-j)*g/m))+a.y;return{tile:{point:b,coords:{row:e,col:k},offsets:{x:c,y:a}},lod:d,extent:f}},getTileExtent:function(a,c,b,d){var f=a.origin,c=a.lods[c].resolution,g=a.width,h=a.height;return new p(d*c*g+f.x,f.y-(b+1)*c*h,(d+1)*c*g+f.x,f.y-b*c*h,a.spatialReference)}}});