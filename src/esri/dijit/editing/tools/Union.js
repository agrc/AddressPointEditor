//>>built
define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/graphicsUtils","esri/graphic","esri/toolbars/draw","esri/dijit/editing/Union","esri/dijit/editing/tools/ButtonToolBase","esri/kernel"],function(a,d,e,n,i,j,k,l,m){return a([m],{declaredClass:"esri.dijit.editing.tools.Union",id:"btnFeatureUnion",_enabledIcon:"toolbarIcon unionIcon",_disabledIcon:"toolbarIcon unionIcon",_drawType:k.POLYLINE,_enabled:!0,_label:"NLS_unionLbl",_onClick:function(){this._settings.editor._activeTool=
"UNION";var a=e.filter(this._settings.layers,function(b){return"esriGeometryPolygon"===b.geometryType&&b.visible&&b._isMapAtVisibleScale()}),h=[],f=0;e.forEach(a,function(b){var c=b.getSelectedFeatures();if(2<=c.length){f++;var a=e.map(c,function(b){return new j(d.clone(b.toJson()))});this._settings.geometryService.union(i.getGeometries(c),d.hitch(this,function(g){g=[c.pop().setGeometry(g)];h.push({layer:b,updates:g,deletes:c,preUpdates:a});f--;if(0>=f)this.onApplyEdits(h,d.hitch(this,function(){if(this._settings.undoRedoManager){var b=
this._settings.undoRedoManager;e.forEach(this._edits,d.hitch(this,function(a){b.add(new l({featureLayer:a.layer,addedGraphics:a.deletes,preUpdatedGraphics:a.preUpdates,postUpdatedGraphics:a.updates}))}),this)}this._settings.editor._selectionHelper.clearSelection(!1);this.onFinished()}))}))}},this)}})});