//>>built
define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","esri/layers/FeatureLayer","esri/tasks/query","esri/toolbars/draw","esri/dijit/editing/tools/ToggleToolBase","esri/kernel"],function(e,d,f,b,k,g,h,i,j){return e([j],{declaredClass:"esri.dijit.editing.tools.Reshape",id:"btnFeatureReshape",_enabledIcon:"toolbarIcon reshapeIcon",_disabledIcon:"toolbarIcon reshapeIcon",_drawType:i.POLYLINE,_enabled:!0,_label:"NLS_reshapeLbl",activate:function(){b.disconnect(this._rConnect);
this._rConnect=b.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd");this.inherited(arguments)},deactivate:function(){this.inherited(arguments);b.disconnect(this._rConnect);delete this._rConnect},_onDrawEnd:function(b){var c=this._settings.layers,a=new h;a.geometry=b;this._settings.editor._selectionHelper.selectFeatures(this._reshapeLayers=f.filter(c,function(a){return"esriGeometryPolygon"===a.geometryType||"esriGeometryPolyline"}),a,g.SELECTION_NEW,d.hitch(this,"_reshape",a))},_reshape:function(b,
c){1===c.length&&this._settings.geometryService.reshape(c[0].geometry,b.geometry,d.hitch(this,function(a){a=[c[0].setGeometry(a)];this.onApplyEdits([{layer:c[0].getLayer(),updates:a}],d.hitch(this,function(){this._settings.editor._selectionHelper.clearSelection(!1);this.onFinished()}))}))}})});