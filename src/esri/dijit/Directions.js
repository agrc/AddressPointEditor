//>>built
require({cache:{"url:esri/dijit/templates/Directions.html":'<div class="${options.theme}" role="presentation">\r\n    <div data-dojo-attach-point="_widgetContainer" class="${_widgetContainerClass}" role="presentation">\r\n        <div class="${_stopsContainerClass}" data-dojo-attach-point="_dndNode" role="presentation">\r\n            <table class="${_stopsClass}" data-dojo-attach-point="_dndNode"></table>\r\n            <div class="${_clearClass}"></div>\r\n            <div class="${_stopsButtonContainerClass}">\r\n                <div role="button" class="${_stopsAddDestinationClass}" data-dojo-attach-point="_addDestinationNode" data-dojo-attach-event="ondijitclick:_addStopButton">${_i18n.widgets.directions.addDestination}</div>\r\n                <div role="button" class="${_stopsOptionsButtonClass}" data-dojo-attach-point="_optionsButtonNode" data-dojo-attach-event="ondijitclick:_toggleOptionsMenu">${_i18n.widgets.directions.showOptions}</div>\r\n            \t<div class="${_clearClass}"></div>\r\n            </div>\r\n            <div role="presentation" class="${_stopsOptionsMenuClass}" data-dojo-attach-point="_optionsMenuNode">\r\n                <div class="${_stopsOptionsCheckboxesClass}">\r\n                    <ul>\r\n                        <li class="${_stopsFindOptimalOrderClass}" data-dojo-attach-point="_findOptimalOrderItemNode"><input data-dojo-attach-event="ondijitclick:_toggleCheckbox" tabindex="0" data-dojo-attach-point="_findOptimalOrderNode" type="checkbox" id="${id}_find_optimal_order" /><label for="${id}_find_optimal_order">${_i18n.widgets.directions.findOptimalOrder}</label></li>\r\n                        <li class="${_stopsReturnToStartClass}" data-dojo-attach-point="_returnToStartItemNode"><input data-dojo-attach-event="ondijitclick:_toggleCheckbox" tabindex="0" data-dojo-attach-point="_returnToStartNode" type="checkbox" id="${id}_stopsReturnToStart" /><label for="${id}_stopsReturnToStart">${_i18n.widgets.directions.returnToStart}</label></li>\r\n                        <li class="${_stopsUseTrafficClass}" data-dojo-attach-point="_useTrafficItemNode"><input data-dojo-attach-event="ondijitclick:_toggleCheckbox" tabindex="0" data-dojo-attach-point="_useTrafficNode" type="checkbox" id="${id}_stopsUseTraffic" /><label for="${id}_stopsUseTraffic">${_i18n.widgets.directions.useTraffic}</label></li>\r\n                    </ul>\r\n                </div>\r\n                <div class="${_stopsOptionsUnitsClass}">\r\n                    <ul>\r\n                        <li><input data-dojo-attach-event="ondijitclick:_toggleUnits" tabindex="0" id="${id}_use_miles" data-dojo-attach-point="_useMilesNode" name="${id}_units" type="radio"><label for="${id}_use_miles">${_i18n.widgets.directions.units.MILES.name}</label></li>\r\n                        <li><input data-dojo-attach-event="ondijitclick:_toggleUnits" tabindex="0" id="${id}_use_kilometers" data-dojo-attach-point="_useKilometersNode" name="${id}_units" type="radio"><label for="${id}_use_kilometers">${_i18n.widgets.directions.units.KILOMETERS.name}</label></li>\r\n                    </ul>\r\n                </div>\r\n                <div class="${_clearClass}"></div>\r\n            </div>\r\n            <div class="${_stopsGetDirectionsContainerClass}">\r\n                <div tabindex="0" role="button" class="${_stopsGetDirectionsClass}" data-dojo-attach-event="ondijitclick:_directionsButton">${_i18n.widgets.directions.getDirections}</div>\r\n                <div tabindex="0" role="button" class="${_stopsClearDirectionsClass}" data-dojo-attach-event="ondijitclick:clearDirections">${_i18n.widgets.directions.clearDirections}</div>\r\n                <div class="${_clearClass}"></div>\r\n            </div>\r\n    \t</div>\r\n    \t<div class="${_clearClass}"></div>\r\n    \t<div data-dojo-attach-point="_errorNode" role="presentation"></div>\r\n    \t<div class="${_resultsContainerClass}" role="presentation">\r\n        \t<div class="${_routesContainerClass}" data-dojo-attach-point="_resultsNode" role="presentation"></div>\r\n    \t</div>\r\n    </div>\r\n</div>'}});
define(["require","dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dijit/_WidgetBase","dijit/_OnDijitClickMixin","dijit/_TemplatedMixin","dojo/keys","dojo/has","dojo/on","dojo/mouse","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/query","dojo/number","dojo/i18n!esri/nls/jsapi","dojo/text!esri/dijit/templates/Directions.html","esri/dijit/Geocoder","dojo/dom-construct","dojo/promise/all","dojo/Deferred","dojo/dnd/Source","esri/kernel","esri/graphic","esri/units","esri/InfoTemplate","esri/SpatialReference","esri/layers/ArcGISDynamicMapServiceLayer","esri/geometry/Point","esri/geometry/Extent","esri/geometry/Polyline","esri/geometry/mathUtils","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/TextSymbol","esri/symbols/Font","esri/dijit/_EventedWidget","esri/dijit/Popup","esri/tasks/FeatureSet","esri/tasks/RouteTask","esri/tasks/RouteParameters","esri/toolbars/edit","dojo/uacss"],
function(A,J,w,p,q,y,Y,K,L,v,Z,l,B,C,M,m,h,k,r,z,g,N,D,j,E,o,O,$,s,n,F,P,aa,Q,R,G,S,t,H,T,x,U,ba,V,W,X,I){return J([U,K,L],{declaredClass:"esri.dijit.Directions",templateString:N,basePath:A.toUrl("esri/dijit"),_eventMap:{load:!0,"directions-start":!0,"directions-finish":["result"],"directions-clear":!0,"segment-select":["graphic"],"segment-highlight":["graphic"]},constructor:function(a,b){this._setClasses();this._setTemplates();this._setPublicDefaults();p.mixin(this.options,a);this._setPrivateDefaults();
this._setTrafficDefaults();this._widgetProperties();this.set("geocoders",[]);this._watchEvents.push(this.watch("theme",this._updateThemeWatch));this._watchEvents.push(this.watch("stops",this._updateStopsWatch));this.domNode=b},startup:function(){this._setOptions();this._setStops();this._dnd=new O(this._dndNode,{skipForm:!0,withHandles:!0});this.options.map?this.options.map.loaded?this._init():this._onEvents.push(this.options.map.on("load",p.hitch(this,this._init))):this._init()},destroy:function(){var a;
this.clearDirections();this._removeTrafficLayer();if(this._watchEvents)for(a=0;a<this._watchEvents.length;a++)this._watchEvents[a].unwatch();this._globalGeocoder&&this._globalGeocoder.destroy();this._dnd&&this._dnd.destroy();if(this.geocoders.length)for(a=0;a<this.geocoders.length;a++)this.geocoders[a].destroy();if(this._onEvents)for(a=0;a<this._onEvents.length;a++)this._onEvents[a].remove();if(this._geocoderFindEvents)for(a=0;a<this._geocoderFindEvents.length;a++)this._geocoderFindEvents[a].remove();
if(this._geocoderWatchEvents)for(a=0;a<this._geocoderWatchEvents.length;a++)this._geocoderWatchEvents[a].unwatch();if(this._geocoderSelectEvents)for(a=0;a<this._geocoderSelectEvents.length;a++)this._geocoderSelectEvents[a].remove();if(this._connectEvents)for(a=0;a<this._connectEvents.length;a++)w.disconnect(this._connectEvents[a]);this._disconnectResults();j.empty(this.domNode);this.inherited(arguments)},clearDirections:function(){this._routeParams.stops.features=[];this.set("directions",null);this._clearStopGraphics();
this._clearRouteGraphics();this._clearInfoWindow();this._clearResultsHTML();this._clearResultError();this.onDirectionsClear()},reset:function(){this.clearDirections();this._removeTrafficLayer();this._setTrafficDefaults();this._configureRouteOptions();this._widgetProperties();this._setOptions();this.updateStops(this.options.stops)},onLoad:function(){},onDirectionsStart:function(){h.add(this._widgetContainer,this._resultsLoadingClass);this._solveActive=!0},onDirectionsFinish:function(){h.remove(this._widgetContainer,
this._resultsLoadingClass);this._solveActive=!1},onDirectionsClear:function(){},onSegmentSelect:function(){},onSegmentHighlight:function(){},onAddStops:function(){},onUpdateStops:function(){},onRemoveStops:function(){},removeStops:function(){var a=this;a._clearResultError();return a._removeStops().then(function(b){a.onRemoveStops(b)})},removeStop:function(a){var b=this;b._clearResultError();return b._removeStop(a).then(function(a,e){b.onRemoveStops(a,e)})},updateStops:function(a){var b=this;b._clearResultError();
return b._updateStops(a).then(function(a){b.onUpdateStops(a)})},addStops:function(a,b){var c=this;c._clearResultError();return c._addStops(a,b).then(function(a,b){c.onAddStops(a,b)})},addStop:function(a,b){var c=this;c._clearResultError();return c._addStop(a,b).then(function(a,b){c.onAddStops(a,b)})},updateStop:function(a,b){var c=this;c._clearResultError();return c._updateStop(a,b).then(function(a,b){c.onUpdateStops(a,b)})},getDirections:function(){var a=this;a._clearResultError();a._directionsDeferred=
new o;a._calculateValidStops()>=a.get("minStops")?a._solveActive||(a.onDirectionsStart(),a.clearDirections(),a._dnd.sync(),a._sortGeocoders(),a._getCandidates(a.get("stops")).then(function(b){a._stops=b;a._setStops();a.onUpdateStops(a.get("stops"));var c=a._validateStops(b);c.error?(b=g.widgets.directions.error.locator,(c=a.geocoders[c.index])&&(b=g.widgets.directions.error.unknownStop.replace("<name>",c.get("value"))),a._resultError(b),a._directionsDeferred.reject(b),a.onDirectionsFinish(Error([b]))):
a._configureRoute()},function(){a.onDirectionsFinish()})):(a.clearDirections(),a._resultError(g.widgets.directions.error.notEnoughStops),a._directionsDeferred.reject(g.widgets.directions.error.notEnoughStops),a.onDirectionsFinish(Error([g.widgets.directions.error.notEnoughStops])));return a._directionsDeferred},unhighlightSegment:function(){if(this.options.map&&this.options.map.graphics&&this.options.showSegmentHighlight)this.options.map.graphics.remove(this._segmentGraphic),this._segmentGraphic=
null},highlightSegment:function(a){"undefined"===typeof a&&(a=0);var a=this.directions.features[a],b=new G(a.geometry),c=b.getPoint(0,0),e=b.getPoint(0,1);S.getLength(c,e)?b.getPoint(0,0):b=c;this.unhighlightSegment();(this._segmentGraphic=new s(b,this.options.segmentSymbol,a.attributes,this.options.segmentInfoTemplate))&&this.options.map&&this.options.map.graphics&&this.options.showSegmentHighlight&&this.options.map.graphics.add(this._segmentGraphic)},zoomToSegment:function(a){var b=this;"undefined"===
typeof a&&(a=0);if(b.options.map){var c=b.directions.features[a],e=(new G(c.geometry)).getExtent();b.options.map.setExtent(e,!0).then(function(){b._showSegmentPopup(c,a)})}},centerAtSegmentStart:function(a){var b=this;"undefined"===typeof a&&(a=0);if(b.options.map){var c=b.directions.features[a],e=c.geometry.getPoint(0,0);b.options.map.centerAt(e).then(function(){b._showSegmentPopup(c,a)})}},zoomToFullRoute:function(){this.options.map&&(this._clearInfoWindow(),this.unhighlightSegment(),this.options.map.setExtent(this.directions.extent,
!0))},_updateStops:function(a){var b=a.length;if(a&&b){var c=[],e;if(b===this._stops.length)for(e=0;e<b;e++)c.push(this._updateStop(a[e],e));else if(b>this._stops.length){var d=0;for(e=0;e<this._stops.length;e++)c.push(this._updateStop(a[e],e)),d++;for(e=d;e<b;e++)c.push(this._addStop(a[e],e))}else{d=this._stops.length-b;for(e=0;e<d;e++)this._removeStop();for(e=0;e<b;e++)c.push(this._updateStop(a[e],e))}if(c.length)return E(c)}else return this._removeStops()},_removeStops:function(){var a=p.clone(this.get("stops")),
b=new o;if(this._stops.length){for(;this._stops.length;)this._removeStop();b.resolve(this._removeSortIds(a))}else b.reject("no stops to remove");return b},_removeStop:function(a){var b=new o;if(this._stops.length){"undefined"===typeof a&&(a=this._stops.length-1);var c=p.clone(this._stops)[a],e=this._dnd.getAllNodes()[a];this.geocoders[a].destroy();this.geocoders.splice(a,1);this._stops.splice(a,1);this._setStops();this._geocoderSelectEvents[e.id].remove();this._geocoderFindEvents[e.id].remove();this._geocoderWatchEvents[e.id].unwatch();
j.destroy(e);this._dnd.sync();this._stopsRemovable();this._optionsMenu();this._checkMaxStops();this._fixIcons();this._sortGeocoders();b.resolve(this._removeSortId(c),a)}else b.reject("no stop to remove");return b},_removeTrafficLayer:function(){if(this._trafficLayer&&this.options.map)this.options.map.removeLayer(this._trafficLayer),this._trafficLayer=!1},_addStops:function(a,b){var c=this,e;if("undefined"===typeof b)b=c._stops.length;var d=new o;a&&a.length?c._getCandidates(a).then(function(a){if(a&&
a.length){for(e=0;e<a.length;e++)c._insertStop(a[e],b+e);c._setStops();d.resolve(c._removeSortIds(a))}else c._resultError(g.widgets.directions.error.noAddresses),d.reject(g.widgets.directions.error.noAddresses)}):(c._resultError(g.widgets.directions.error.noStops),d.reject(g.widgets.directions.error.noStops));return d},_addStop:function(a,b){var c=this;if("undefined"===typeof b)b=c._stops.length;var e=new o;c._checkMaxStops();c.maxStopsReached?(c._resultError(g.widgets.directions.error.maximumStops),
e.reject(g.widgets.directions.error.maximumStops)):c._getCandidate(a,b).then(function(a){c._insertStop(a,b);c._setStops();e.resolve(c._removeSortId(a),b)},function(a){e.reject(a)});return e},_setTrafficDefaults:function(){},_setPublicDefaults:function(){this.options={map:null,autoSolve:!0,minStops:2,maxStops:20,theme:"simpleDirections",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",directions:null,showReturnToStartOption:!0,showUseOptimalRouteOption:!0,returnToStart:!1,useOptimalRoute:!1,routeTaskUrl:location.protocol+
"//route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",routeParams:{},stops:["",""],geocoderOptions:{autoComplete:!0,autoNavigate:!1},stopsInfoTemplate:new F("Location",this._stopTpl),segmentInfoTemplate:new F("Route",this._routeTpl),textSymbolFont:new x("11px",x.STYLE_NORMAL,x.VARIANT_NORMAL,x.WEIGHT_NORMAL,"Arial, Helvetica, sans-serif"),textSymbolColor:new y([255,255,255]),textSymbolOffset:{x:0,y:10.875},fromSymbol:(new t({url:this.basePath+"/images/Directions/greenPoint.png",
height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4OTI1MkU2ODE0QzUxMUUyQURFMUNDNThGMTA3MjkzMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4OTI1MkU2OTE0QzUxMUUyQURFMUNDNThGMTA3MjkzMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg5MjUyRTY2MTRDNTExRTJBREUxQ0M1OEYxMDcyOTMxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjg5MjUyRTY3MTRDNTExRTJBREUxQ0M1OEYxMDcyOTMxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iVNkdQAABJlJREFUeNp0VltvG0UUnpkdr72261CnCQWEIA9FqOKlqooARUKCtAUhoA+VoBVRhfgFXKSKJ97goRL8ARCIclGgL0VUkBBAoBaVoggEQQVSAhFS06SJje3Y3t25cc7srL3YjddHs3N85pvvfOfMyJRs83n8o+P7POI9yQibooTeBa68ISbSRv+hifpCGHX2s6dnfrrRWjroOPzB0T0+zZ0q8uDRSrniF/MB8X2fADhR8IRRRDphh7Q6rbgtOucU0Sdnj59Z2hb00PtHD+Zp/p2x6uitO4o7iLYP8DMafjVE2wXUboALm50W2ahtXO3q8MTX02fnh0Affu/IkSAXnL55dLzMPU6kURZMIZQhFtRk2VBKcpQTIQVZ21hrdUX4zDcnPv2kBzr59mP3BLnChfGx8YrHPKIAELSzMPhQk+ydzpOvIYwywjFeK7K+vt6IlZw8/+y5RZ4gm9eCUrGCmkUyBkCV0Sd5UlBtTLIhRWQE9ixwsVwe6dY3X4WwJ+j9bx7a7/v5i6O7qlxisFZJAvBF7Rjty56CWlmszilj6BNgXd+syTCO7uNK62nuezyUkWWASTPHDtOjbgOHkJTOsbXAyJhIC+rlODdROM211gcQKBJxoh+EKAs4AGqybHVfBvdICNIU/IDHYbcJiS6le4wwbW1B9UDXJcg9QBxtbglh1BlAJzjoUxIGQZFRwtAypgnjtH0spDG9MWVs34xrN5uBLnEoTKQUgDLgZ6hliLunBaIDhy4LYhyotptZlphGyLUhfyspxxj3AIpaVqikdgyzoGn7p0xNj71rNamweCscWC0qoQ8YRm3K2OgpeFoc+j9FSUYKB+4OgxIK4RcZUJ6RsUgqCrShxWzza9035aw/lzYGY5P4xFSMR5vMcFpm87opL4HjXsr76dLhC2xYhgx3I0BfoS7RCp+3K/e8vn+Ke2zWK+cYofQG9yMlw1eK1aAni9oSWil9eOmFhXkPnbXZ1eXqwVsirfQU9Vynm75lymLbxvpSP4yqI4iR5uWlFxdOI56Xbro5t3qhOrW7ZmL1EOFwp7k6pRXuWaZgBmuwJSIl1fNXXvrxjRTLy2ZTm1v9YeTBXedNbCYZZ1U4pdt+NGiomuKKEvKp5ZM/f5z9zctc1vju1b9cv5q/M/icBd4+KNztlnGWKfYjAMqm+K7zZ/PYP6d+X3TrafbmR8N71QcrOPMLd5RGdj838WFup393orNLWRki6vFv197661i40m6AKwYLneG79BzDPNhNYFWwnfguGyKgPl32bwseoTnKekVpS9n49vorWwv1JsSVwAJHCHcW2Agsk3rBBZXBihhcn11biTfDixpPik1bEZyj34EVXXzJrUccWwrbZo5+B6ztRpvO1kLjjO5qW3YccZ5JeTAecQxqqV0Q6hM5KVIrNL5a/77yQPUyLbK9qiMv49zFhW6MMnPE0dwxlQ48ckXDNHJOq0C2xByreHtxhPk1sK4DEI5dut7+QWCZCyj9MXKLWmD/gl1Xtfhd6F2CI86dv+XiIrdOpeeCDd0VyW7KGbLptn9p/mrgNsIxwzKN0QO3IvlPgAEA3AQhIZtaN54AAAAASUVORK5CYII=",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),fromSymbolDrag:(new t({url:this.basePath+"/images/Directions/greenPointMove.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzU5RTBFMjk2QzlCMTFFMkI3NTI4NEEyOTA0NjEyMEYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NzU5RTBFMkE2QzlCMTFFMkI3NTI4NEEyOTA0NjEyMEYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NTlFMEUyNzZDOUIxMUUyQjc1Mjg0QTI5MDQ2MTIwRiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3NTlFMEUyODZDOUIxMUUyQjc1Mjg0QTI5MDQ2MTIwRiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkWg288AAAVnSURBVHjadFVrbBVFFD4zO3fvo7e9baEBIUohQBQRRWwQhJDwLBIRE4yAEmPgh4l/NGrqP0wkIhJ8JYYYfCAqBuGHkBgoIK9QIzVEAiXYQoHGpi2l9NrXvbs7OzOe2Z29vRTYm9OZOXvmm+9858yWwH2e535ZN9MC63kKdDEBMhVdcQXKlUq2SBBHuRIHDq3Ze/5ee8lIx7I9q6fYJLYtxZLLy9JldiqeBNu2AcFB4M9xXcg5ORjIDXhDPPebAFlXv27/lfuCLv1p9ZI4ie+qqhw1rjRVCjL4KZjMJsAUVg0t/nW4wm8EB+iN/bkB6Ont6chL59UT6w8ci3CsaLLox1WrErH43jFVVaNisRg40gVPeDDZngBL0vMhw0phkv0Q9PBeaPc6wVMcbBaDRDJR6jj5F8avnHSp7deWZo1F9Z95362YTsH6PlNenkatYJDnIMfzkPMdeDazECzLKtiK8kXgcJTAywMKAD5KUl5ZUWoRa7fG0Xgs1EBtSZakyrRmru+BRODo2dH1AyRpAjaOWws7O/ZAXjjgYgaKKAClgBILGLUglU5n8tnbH+KWlWzO10tnUcuqZXGKzPKgpAilJhBo1+F2hjohy9b8dTwQe0Bh/aUM/Ao4cIlZ2BQYo8trdi6aRfHlemZbzPFRQ7QnMzPgi+mbwRc++NIHjiPHkTGGPhH4fDxYoH352BaoKX8CmbuBWTHGlFLrmZSyRlfY5R48M7oGNlSvCxjEUBmdJjGsNVN9EPJEthLiKIn2bax+GaRUcKbnLEiC3YJ4TCg5Ec8GIiTMr3o6CAy0fOrjOxuaEPh29mf3vCgLxsyBkzcbAp0RdCLSlSVcaVACJ7obYMaoaUHgpvNbC22sAd9//F30hQcprSuOH8ysC9Ynus4EEmFBdBYlDAvjCkyLUArHO05jNQHefPR1uJi9bG4HKRSqCX0aLgLVvk+adsDRjlNByaQunlQOQzluCN+voszC20Ogvv0kHG0/VWAYgQaF0mwKTBUsr18TzANAHKWPBVSyjSLhJsHDFtH9KaUIq4up6FGnFbfsgFXcihfeBfE413vCvejjQsM3kUc+n72MMnKYpe0CK0KG02548dBdhZm7r9YwBgiFCEd/gIMSqpaSND0mPdEovLD3tC5CDNvmxu13XFO9Lrw38YG5yJKLRo1n3TrYriqWPXADW+oVEqNEmVOjX3P2KnQOdUMmUQZfXdgFB1sPF96FVMPCiRyXKMNrzW80thY+fVO3z6ojMfKRlWRB+iOadHiuonSjNYDI46Xg6r2Wt89tvePTd/tIZ0Pl4rG9yhMLgRGmJVVmszJsolaKABW2jhjkrvDFW1ff+fvTu76n+uk90vlXZsHoM8pT8yijlYTCfR+pO6afXxXcf+la3YV9xe+sov8Aem5lf+/uiFcnD9OkNZMw8mDAuJip7kcE9Pv5H7nW/rX/bmtuMvtJ8b8TYr6rNlrCmJ2YUJIZu2Hiz7EK+2FiDWuKLQM86/3T9c31tU7bUB+6PDTHmJ77lmEYRytHq0Sr0HO/jyeJTa7Z45O1WEAaXU8x5Pt9p29tGjyX7ce4ErSkIaRP5miCFqWeMEFptJQOztbfbPNuO39KfVOCtAXotfYbsJSJLzH7NU5QCl1MYejn0IbMGKQzeK5vv8zLoOx61OuilEfGaxyltZQmSOvjGikiS/Qd7z5bNrfyMknRaSLnX9ZrE+eY0S1aaxzJDFPfgLumaFbw8Q+1SuKdPkLLrGl6xHUXWt4AcMMu2q9N0eF7UXjpmk0DaP+h3RK93m7sXdCjXhv/gIlzzT4R3YuR7a3MacKYZpMfuth/SeFHQ49FLKMYWXxr9fO/AAMAeko3KTmnLXwAAAAASUVORK5CYII=",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),stopSymbol:(new t({url:this.basePath+"/images/Directions/bluePoint.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowRDNGRjhFQzNDMDcxMUUyQTlERUFFMkE4NTNDNjgwMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowRDNGRjhFRDNDMDcxMUUyQTlERUFFMkE4NTNDNjgwMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBEM0ZGOEVBM0MwNzExRTJBOURFQUUyQTg1M0M2ODAyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBEM0ZGOEVCM0MwNzExRTJBOURFQUUyQTg1M0M2ODAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+G7OGVQAABIpJREFUeNqEVE1oXUUUPvPz7vvPHy9FIi4KWiS6KSW4UHBToUXwb1ewCILLrhTEiLizi+JKd25iFaUiBYWCmGy6abUIukitVBGLkIZE4stLXt79mZnjOTNzk9vXFO/jvJk795xvvnO+MyPm37sO/CRSgRICQApoaFoQ8rgGfFFKOCnAHaOVOjrInBC3jRXLxsE3AO4XgwLy3AIKBAfosTTc/zxGdqGt8fRkt5W0mnWoJzUQ9KNQyLJidriXPj0YjhZ3UrhCvm+T/V4FGAd9rqXtUm96aq7baQESiwIR8hQILrAAUYNmJ4Fmu5s0d4cv/7PVfyoH8Rp9WTkM9KVGIj/r9XqdWqJhN6d0CNC5ABYhaaMwSipTrd6C3mwyZza2Lo8K8yotf1sFfVIp/HRyZrrDNcoyC5bAqIZUKyIXgXjuLL0IT5mAAWqkw/TMdDff2LxIIc/Qh1VtqOI1Kc63Wt0JEgBGNjAUFMC6oQljyZLxnZ+zLATMzAi93elOUik+MIgvMNMTSqlTMqnDsHAhXSYjuREEN8N+7h7QcUlo5A1dAFY0V0kDtFKnjTEntEU8K+sNnZrozCy5ZsxChHn1cRHcUkahEg64ZJLmqtnQONg9qxFxwaGEjMqADBhzlRTBYvCrGBPKs42sPXvyVbyOiuruFpjpUSMU0HahY4gdp+w4dYdw2ONKYAxz3tJa3l3x+lFNq+3CMUMXWFEqXnER2PiNZGTpDkB9JzBTUQpIP+v4W5uYOsqc1UavJEF6MAYPzLmAByx9n3qRgh+6uAmGrqGuSDVK8Zd1ZlbSSWFZ/PGPWguAe4QqG98zi+0VrNyADrIUdzTttOpssYBC+5QZhOspKmjlFMc2YHZY2YxwuINWJal1yRWpPzZhR06D+/XAbLTqu/cJlQyxrIFJWZtL0jV7K7YoblhTgKucGKr5A81Fn1J9Nh9POIwnfbyAd1226xAqP3lgEG1/beznM0h3HOMwXmwWWHE2XzR729RvNtxOhxhW5taW5aDLJx2QSMVief3ty3HkzRU+7Ofo74JsTtS5kf/3QSIwGmQE/Bax+3jjw5P3CLsv9My5K89KXftEtiYfFSp5IJ4zOeBo+w9nije2Pnr+arU5VKVreK5GN75Y0w/Pf0dsj9PV8wjI+xkjA+5tXcv//vlMf+n11Rgvqi0o4mXNtBrREj33xOTEK+e/VFMPPQ5SVymC7a//Nrj8zhmzdnObVnKyNBrPjYoM62RTZDNk0zx3O5tN0PU/5ZFjp6DWkKHJSaBh36Q/ffV+/uvygJbaZM1IiMkVpfpl6o3o1CFrsfPo2tIdt732A9osHEYa+Z3XI1gr+rdjvCrvH4xXBtPfIxvG0aeT31r+GrOhP7888nsl5XF/xkEZDwc7cX02yO6Srcf51uj65z+6dPsWi8Mjv/N6/L4e/TdiPOM4HZmaCJ5F0TiNWqxVE0f977EzO89jBBpFgCKyK+NdyRQqJTARmIN2yPpkm/bfuxe5njzye1zfiX5ZjLNlr8rxFizvk2jMZlTcvnoTCwM8VliWPm7sVoT/BBgAPp8JxKgcaMoAAAAASUVORK5CYII=",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),stopSymbolDrag:(new t({url:this.basePath+"/images/Directions/bluePointMove.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkQ5MDM5MjY2QzlCMTFFMkI0NTE5QUY4QjQzREJFODIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkQ5MDM5Mjc2QzlCMTFFMkI0NTE5QUY4QjQzREJFODIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2RDkwMzkyNDZDOUIxMUUyQjQ1MTlBRjhCNDNEQkU4MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2RDkwMzkyNTZDOUIxMUUyQjQ1MTlBRjhCNDNEQkU4MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmssHYwAAAUwSURBVHjahFZtiFRVGH7PuR8zc3dmv9odzazc0C0sEBEriohiKzcjy1AQ8k/QT8lK0goJ+pGWGET9CPpjFoYigomypoj+0VrCPlhTVw0t2JVdWWd3dubOnXs+et9zz6zX2aK7+95z3nPf85zn/Tq7bPHWM0CPzx1wGAPgDLIuLjC+1AW9inPoY6B6cSWjFUSKsWEh2TGh4CCA+lVoBvW6BM00KNAGy4XZzyKUHS2u7m8rBH6Qy0DG94DhD26FKIq7K9Xa41OV8L1yDQ6j7WaUS2kA3gT4TODKk8WOwqq5c4t+NihADB7cG9Sgf95NWIAj6bl8K8wpFv1iZ+Fln4mTuK8vDZJm+lLW5990dXXlPd+F6Tq6ozUsuSOCFxZUjUFPexXQUzg77gPHMHmZALq6/XlibOJAGItX0eT7NNOHHEd/3dbZkacYTUcSKri7iuOaRRE4jjMja3sjCGP8jt/KaCPRvqOzo+Aw2E04hqnAiHucbQuCQismAEKZMGR4HOVt+2AOAk/DW8sF7Bx0oSqYYas1pYUZVi5msyVfaLsxUfpIaP0iub8MGazgfgYqsQKlMIMaDChH1L/KdDYzLC/cZOa7ETxQqwQYWYLjZ8F1nH4hxDIutV7PM1m3JjTUUR6bD7BntQPoAIqGWCbiui4IHNEEqwDMfO8rLjxxD0CEi7TfyWVddHI9vvRypTl+UPB0jwNvPOLZuhVQk0kI8NcwFVqg22CY5ryE/cZHHdRjOHFVYNgcrFe13EWmPYI5QBT67vOMIT171wa31RpD9IPr/q2sAZ7F1hi4ItCIDtA9LsK3xHgyYwqOXolh2fyMMdx4pGwYJoAAn/YX4M0jJsCGLSYdPnu+YPSBSyFywvhKzImGFmSqIood4xoOD0cGYetTrXB2JJ4BBOv+2dHYANJpGDaz9uGJKTh0MTI6VQ1WRc3VnF2VSnRz5plMHrqIvTdcSwCtmNrDREmtbzFFefjLsWQO1PdUDdjInF3jyHpIyRgkspVYIhJdoMyS3sh+1k2SksXkCKWtrTa2Zo/SCVPEQXWI3bnpxHPM8QacoP1WUlIML7yzcFZi7v/kcsI4tUZzWS3hK17BVa7ruIzjQSlisHVvXEESRrYcGb+tTUlX1obsG2L2Iw7huWY/g/dZNH2UB+28+f7aP1Qy3bVmSTvs+61k9DQ7M1KH1cqKcNBUsjlbfwdVvYHuqs3gZLbzbB5Bbr8RWZObDaDGiqpNI1S0RQP/mAddt+yLbx+nZt+Arx0815qhQv7fR0tQ4VSklNyENL4Y29k3i4TROzccfpK73lc8aFvIHP8/8ZSogw4nLysRvz7x+cpT6bw5KQ9p7oSDe0bcuxYPINulePXcDXw2Y02A1YnT9b9/WVfa9dpQU8HMKJQwopW14rvzHmxrXb3tO6d97gPA3TRFkKXrF6YOvLtOjJybxJU6Ss0KzYVjGVLDU6F2onTQXJXHc+Bm/uTF3hXgZbmGpDVlpSRqP+/7oP7HsSlcakHJWUJEjnpb8pTrWWuUR6ErKhee3nVNTY78qGVkQkYj6bRuwQJr32L3O5Dc70kzWPr0F65iR+NO/fyx/TqqaHOJ4Eh6yuVme8LR3DYHGVF8xlBGUa7b+UR45tufVG3yPCWHRtJp3X6/bu3H7H7CUa5lKix4ZJNGbng2Vjkdln7Q+e7FNFqg0ALEll1jv2owhVQIhAWmTXQjU0+Oy5ujuymeNJJu18vWLrL7ZKNWm/9DmblPrBCbMB4+dU7HAmhMsWzYqKYLC/4RYACkZdX+YS9hNAAAAABJRU5ErkJggg==",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),toSymbol:(new t({url:this.basePath+"/images/Directions/redPoint.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNEZDQTg5MTE0QzYxMUUyQURFMUNDNThGMTA3MjkzMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNEZDQTg5MjE0QzYxMUUyQURFMUNDNThGMTA3MjkzMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg5MjUyRTZBMTRDNTExRTJBREUxQ0M1OEYxMDcyOTMxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjI0RkNBODkwMTRDNjExRTJBREUxQ0M1OEYxMDcyOTMxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pmgrrgAABHNJREFUeNqEVU2IHEUUflVd3fO/P3FWRPAQ0EVWL2FZFBS8REgQXD0GDILg0Zsgbg7ezCFXb15iFCUigkJAzF5y0RgQPUyIRBFz2SxusszO7uxMd1e953vV1TM9m6gF31S96qqvvvdTNerH9RWQFtUSUCYCRWwkddAAJ8iYdVD6JIJa5tkaAKUK8bZCexWc/QYJflXO8jADcsRAz2XgwfYU4wI1Wqebnfmk1mhCnNSYWwFZB3meLo0Phy+M9gcbcLh/hde+x/i9SnCU9GWXNC8udLuPN9sdYBo+PQcYsxIivyDmLmk2oNNsJMNB4/X+/XvPKZu9yZ82H0b6mo7rn3aXum1jYqDDAyBEJitcgkDKA/+rlIZmLYaEBezu2K/taPQGT39bJX2WVPTJ4tx828coTZnQFQRCptSE2B9STjGxYgGLC4udnSy7BA5f5NmeQSZRcXy+02rOKbJAo5FXyDsKqFlSD/6O3CsZRxp0ZKDTas33x/c+JGtfFaWrURSdqvFHPBwWhJ5DsRDt1UzaRCmDM83BAZULcQR1HUFkzGlr7aoh587WtTaUjv3igrQgJNRTlWXzXkgCOTwcIpTD2Vs5nInNAdFZw1ldY42AWeozrLzLvI1JJRmeVFAmqlSLQYDYIEJYqfA4WhOlxyPLsdQhL56ECWWTJ62onBQAToiLsZzrIPJn4HHDdovyHFCrEMciOQV5KKcJM01DMFFMRTjYxiKJLYPWpSRKhcTHUQiwIC8KcjamvgKguAyEwUZvyzVFpLFRSH9Z65Zizr4vESjJS8KH+F+WFk1VinrHqpnvDpcU9XKHawZKlzkEhLNk1TqtHEAz5AC58zHuac7W5bHF4EVwwbtRAZePx4yNfq3fE/YKD5K6rLsRbubO3citmyTA9+j+A/gAZH+OeEP4pJAcB+PcAc/4U0u4CsIlmtqzEPX71gf1nPCVd3Azc7ixl/Fjwq5R6dpRhPAUISrC4RiDjFU62iifv0k2Np9/VMrzHa6kC3NG1yIF/9tYNAwsps7hu/ywfHTy+t8zVT3J85XVYy/FWn88H+snE/3vzOwZ7Fn6g6P29is/716r3De+rtMrI+Po87ujrZWW+Y7VnkgUPBGV5VlBxhJ3c/rhl73szFu9fm/6Tk7JVHisE0Y9IHmmbebPL8998VgSPW0qgi2Tbmfut/dvD87cPLB7IpoxDpCxjYJC/qeEBcYxxqKMdzJs1BT8udzQp+r8Dhd3naCfO/vl9viDq/ezAa9rMRpBkBydl9kvXa+HRW1GUxZf3Brd2UrxeuqKApdebJkPZM2wvhX2RxCedfK1Wsg/ZAxD791hRV8NnX80QXqxKy4fXe//2Ix/kopFEp80hKJE/bPt0U/rjyS32lqt7GV4S+ywbhz6tGILD5qg1AbyNCRN3IhDrBp9S98vIa1Iz/Y2YxQI8qCu3O//a3TlTSs/pmHTPqPP2LmbuUsST+nFDvP7YV0a9rmyVvWRmqZwmgsQNaNr/fwmP+MgfUVluQarhS/tHwEGAEyHOx7EoDsBAAAAAElFTkSuQmCC",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),toSymbolDrag:(new t({url:this.basePath+"/images/Directions/redPointMove.png",height:21.75,width:15.75,imageData:"iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0RDNTQyNTU2QzlCMTFFMkExREZEMUE4OEI2QURDNjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0RDNTQyNTY2QzlCMTFFMkExREZEMUE4OEI2QURDNjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3REM1NDI1MzZDOUIxMUUyQTFERkQxQTg4QjZBREM2MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3REM1NDI1NDZDOUIxMUUyQTFERkQxQTg4QjZBREM2MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PubpLUYAAAU3SURBVHjahFVbiFZVFF57n33Of5+LOWZFkOAMMQUh49jFyofGUIosIlBLgqCgB4NIEvNBItAHA6N6qhfTSkwxykZEfTFJLckixgsqli8zw4zaP//9nLMvrbXP/i+ORZtZs89eZ+1vf+tb69+HnVo1CDS8VABMeMAMLoI0cIBFRohVwPiIBjaA3hSACZnWl5iWR0HJ77SB35mS+BiBUQZNWywBt49+tO0mk1uZLXQHqUwW/CCF2AyMVBDHYV+jVl1aL5feg1p5FGM3ol3uBJgNulwF2Z09c+fenc0XAGHw9BiggUyMsQE+TkE2A4VsJqiWMi8Ub1x/mMnoVXx1rAnCOwCf5376wLw+BPR9MLUK6EoZNM71+f3w99KXoH5XP+h6BVRlBky1DNmUD/OQgBekD+D+52YzfdAw74veru681SgMwWiFbgPxwGKoP/GiDarfsxBAxiAungHG0ME41sGH3p7ewnQU7QKlH0fvGNcIYjjbVshlu5jBZ2SiwyqYGIHjGKKn1oLneS2LRl5B4Ah0hO8bNYwvA0eJCrlct9Zyq4oalukQBq9IeRxTRTCNFSQW+I9xDumvtoJJZUGt3gDenu2obxWICLICjZmwGEXGw9IcDxVipZRySBil1qU5FyZsYLbagSaARqPkE3/aM4glu3YegN7bAqI8KJGmw+kQlAKBRcWYdRyrOowcbToqioA99CSID/aBlihF0xBACNF61k3f1m9tvI4jUCiVRzjKDBPTBR4FISkxvBz81W/bokiRwlavOykSpjFutAMzglQm0XntOxBhu6kzR8BDtzF6gUBFclQQjc0tljxtA2lkt+2/pYEZSpLfcQj+dTy6AqonD4GmXtY6J7RUoU0LN8lThyE9uNjGlT5c34Sz/7s2fIy+t6ye9g+t+91Pklb7adRJgulr0xBMm7+kVH0+Vj888YOF6HpjC8Tnz4Jrxnb6F8669BNU8pU+ex8aJ0ZtARVeBoh3DVvKjMVKDwuqKILUjn8P9R8PtsBc7q1CtYeByZeHWgfQiOlCMZqa3+xtSJ2808lNo20abQPsU6t1Opf4qAMwhmLtHreXcLRhe9kfy+70rks42eN7S3wsVpJym+jCg5dvq8uVZ/vbMrhBLItS/zJXwGN0oSgUY3MlRonp1KapxKZ2bLzlZ0rrW+LQiH1ZWlE3E5735n15qClzVRoI0T/iE1nTLkbjynmQU+PgF3pgevdHUDy8z/oN/fpwpjYqxxoiDZtw6+6sYO1qHHtkHoGtRwW2dwme8hj878BEoCR1qJTGi4F/OnJ6qlO5dp1Hh+Ys8zn/vNvnCwP+38gRajgjzRVU7fVnfr15PGlg9+vr6HB69r6eqI8P5sRhZLsoYHCvBy68wyKkeDM2J3+bida8NlYcc/tbDJoLugIDtLSz4IG86N420LVnfuDdLzoIo/YwGamLmy6V1pyryBkijdZwRs/ScwzxSwk9aHPQeul5OtKZFIOrAxm+Is3xs2OLY6AYK/nNZGPL0RtRCeNyaBlHiI6mG0fxjtTTLihP9wkF7xyvXxsP9elQJQ1OM63J78CyLj7n9nvJRyZRSjn6NbSqm206yGh/VRFNfIEzrTtSnh1vP2ykpXZBpE/opGha+svJ+s+r7ggu5DkbnIn0BVq7uIabw4414WjhmEoHHrqiURq+0ypTlOZInzaDNON6km47BxA7ds399lvDW1dO+2XoNpXRimjTE5HaRXrSTGvnL7u40O1TzV7ls3rauNOUM2JTP16Mz+EVDDR3sGzG6M7Gp/GPAAMAKMYdXbFXj3QAAAAASUVORK5CYII=",
contentType:"image/png",type:"esriPMS"})).setOffset(0,10.875),routeSymbol:(new H).setColor(new y([0,69,117,1])).setWidth(4),segmentSymbol:(new H).setColor(new y([0,122,194,1])).setWidth(8),printPage:"",showPrintPage:!0,showSegmentPopup:!0,showSegmentHighlight:!0,centerAtSegmentStart:!0,showReverseStopsButton:!0,focusOnNewStop:!0,dragging:!0,canModifyStops:!0}},_removeEmptyStops:function(){var a;if(this._stops.length>this.get("minStops"))for(a=this._stops.length-1;this._stops.length>this.get("minStops")&&
-1<a;a--){var b=this._stops[a];(!b||!b.name)&&this.removeStop(a)}},_setReverseGeocode:function(a){var b=this;if(a.name&&a.feature.geometry){var c={address:a.name};b._stopGraphics[b._dragGraphic._index]&&(b._stopGraphics[b._dragGraphic._index].setAttributes(c),b._stopGraphics[b._dragGraphic._index].setGeometry(a.feature.geometry));b._textGraphics[b._dragGraphic._index]&&(b._textGraphics[b._dragGraphic._index].setAttributes(c),b._textGraphics[b._dragGraphic._index].setGeometry(a.feature.geometry));
b._moveInProgress||b._unsetDraggableObject(b._dragGraphic);b.geocoders[b._dragGraphic._index]&&b.geocoders[b._dragGraphic._index].set("value",a.name);b._stops[b._dragGraphic._index]=a;b._setStops();b.onUpdateStops(b.get("stops")[b._dragGraphic._index],b._dragGraphic._index);if(b.get("autoSolve"))b._directionsDeferred=new o,b.set("directions",null),b._configureRouteOptions(),b._routeTask.solve(b._routeParams,function(a){b._showRoute(a)},function(a){b._routeTaskError(a)})}},_insertStop:function(a,b){var c=
this,e=c._dnd.getAllNodes(),d=!1,g=!1,i=e.length;e[b]?(g=e[b],d=!0):d=g=!1;var f=j.create("tr",{className:c._stopClass}),e=j.create("td",{className:c._stopIconColumnClass},f);j.create("div",{className:c._stopIconClass+" dojoDndHandle",innerHTML:c._getLetter(i)},e);i=j.create("td",{className:c._esriStopGeocoderColumnClass},f);i=j.create("div",{},i);c.options.canModifyStops&&(e=j.create("td",{className:c._stopIconRemoveColumnClass},f),j.create("div",{className:c._stopIconRemoveClass,role:"button","data-remove":"true"},
e));c._dnd.insertNodes(!1,[f],d,g);c._stops.splice(b,0,a);d=p.mixin(c.options.geocoderOptions,{value:a.name});d=new D(d,i);d[c._sortId]=f.id;c.geocoders.splice(b,0,d);d.startup();g=d.on("select",function(a){if(a.result){var b=c._dnd.getAllNodes(),b=q.indexOf(b,f);c._stops[b]=a.result;c._setStops();c.onUpdateStops(c.get("stops")[b],b);c.get("autoSolve")&&c.getDirections().then(function(){c.zoomToFullRoute()})}});c._geocoderSelectEvents[f.id]=g;g=d.on("enter-key-select",function(a){if(a.result){var b=
c._dnd.getAllNodes(),b=q.indexOf(b,f);c._stops[b]=a.result;c._setStops();c.onUpdateStops(c.get("stops")[b],b);c.get("autoSolve")&&c.getDirections().then(function(){c.zoomToFullRoute()})}});c._geocoderFindEvents[f.id]=g;g=d.watch("value",function(a,b,d){a=c._dnd.getAllNodes();a=q.indexOf(a,f);c._stops[a]&&d!==c._stops[a].name&&(c._stops[a]={name:d},c._setStops(),c.onUpdateStops(c.get("stops")[a],a))});c._geocoderWatchEvents[f.id]=g;c._checkMaxStops();c._fixIcons();c._focusOnNewStop&&d.focus();c._stopsRemovable();
c._optionsMenu();c._sortGeocoders()},_validateStops:function(a){var b;if(a)for(b=0;b<a.length;b++)if(!a[b]||!a[b].feature||!a[b].extent)return{error:!0,index:b};return{error:!1}},_sortStops:function(){var a=this;a._stops.length&&(a._stops.sort(function(b,c){for(var e,d,g=0;g<a.geocoders.length;g++){var i=a.geocoders[g][a._sortId];b[a._sortId]===i?e=g:c[a._sortId]===i&&(d=g)}return e>d?1:d>e?-1:0}),a._setStops())},_getCandidate:function(a,b){var c=this,e=new o,d=typeof a,h={name:""};if(a)if("object"===
d&&a.hasOwnProperty("feature")&&a.hasOwnProperty("name"))e.resolve(a);else if("object"===d&&a.hasOwnProperty("address")&&a.hasOwnProperty("location"))d=c._globalGeocoder._hydrateResult(a),e.resolve(d);else{if("object"===d&&a.hasOwnProperty("name"))a=a.name;if(c.geocoders[b])h.name=c.geocoders[b].get("value");c._globalGeocoder.find(a).then(function(a){a.results&&a.results.length?e.resolve(a.results[0]):(a=g.widgets.directions.error.locator,c._resultError(a),e.reject(a))},function(){var a=g.widgets.directions.error.locator;
c._resultError(a);e.reject(a)})}else e.resolve(h);return e},_updateStop:function(a,b){var c=this,e=new o;c._stops.length?("undefined"===typeof b&&(b=c._stops.length-1),c._getCandidate(a,b).then(function(a){c.geocoders[b]&&(c.geocoders[b].set("value",a.name),c._stops[b]=a,c._setStops());e.resolve(c._removeSortId(a))},function(a){e.reject(a)})):e.reject("could not update stop");return e},_showRoute:function(a){var b=this;b._clearInfoWindow();b._clearResultError();b.set("directions",a.routeResults[0].directions);
var c=a.routeResults[0].stops;if(c&&c.length){var e=[],d;b._clearStopGraphics();var h=c.length;b._startReturn&&h--;for(d=0;d<h;d++){var i=c[d],i={extent:new R({xmin:i.geometry.x-0.25,ymin:i.geometry.y-0.25,xmax:i.geometry.x+0.25,ymax:i.geometry.y+0.25,spatialReference:i.geometry.spatialReference}),feature:i,name:i.attributes.Name};e.push(i)}b._stops=e;for(d=0;d<b._stops.length;d++)b._updateStop(b._stops[d],d);b._setStops();b.onUpdateStops(b.get("stops"));b._setRouteSymbols()}b._clearRouteGraphics();
b.set("mergedRouteGraphic",new s(b.directions.mergedGeometry,b.options.routeSymbol));b.options.map&&b.options.map.graphics&&(b.options.map.graphics.add(b.get("mergedRouteGraphic")),(c=b.get("mergedRouteGraphic").getDojoShape())&&c.moveToBack());b._addRouteSymbols();var f="";if(b._resultsNode){f+='<div class="'+b._resultsRouteNameClass+'">';f+=b.directions.routeName;f+="</div>";f+='<div class="'+b._clearClass+'"></div>';if(b.directions.totalLength||b.directions.totalTime)c=b._formatDistance(b.directions.totalLength,
g.widgets.directions.units[b._getUnits(b.get("directionsLengthUnits"))].name),e=b._formatTime(b.directions.totalTime),f+='<div class="'+b._resultsSummaryClass+'">',c&&(f+=c),c&&e&&(f+=" &middot; "),e&&(f+=e),f+="</div>";f+='<div class="'+b._clearClass+'"></div>';f+='<div class="'+b._resultsRouteButtonContainerClass+'">';f+='<div tabindex="0" role="button" class="'+b._resultsViewFullRouteClass+'" data-full-route="true">'+g.widgets.directions.viewFullRoute+"</div>";b.options.showPrintPage&&(f+='<div tabindex="0" role="button" title="'+
g.widgets.directions.print+'" class="'+b._resultsPrintClass+'" data-print-directions="true"></div>');var f=f+('<div class="'+b._clearClass+'"></div>'),f=f+"</div>",f=f+('<div class="'+b._routesClass+'">'),f=f+('<table summary="'+b.directions.routeName+'">'),f=f+'<tbody role="menu">',u=0;q.forEach(b.directions.features,function(a,c){var d=b._routeClass;if(a.attributes)a.attributes.step=c+1;a.attributes.maneuverType&&(d+=" "+a.attributes.maneuverType);if(0===c||b._startReturn&&c+1===b.directions.features.length)d+=
" "+b._routeOriginClass;else if(c===b.directions.features.length-1||b.stops.length-1===u&&("esriDMTStop"===a.attributes.maneuverType||"esriDMTDepart"===a.attributes.maneuverType))d+=" "+b._routeDestinationClass;b.directions.features.length===c+1&&(d+=" "+b._routeLastClass);f+='<tr tabindex="0" role="menuitem" class="'+d+" "+b._routeZoomClass+'" data-segment="'+c+'">';f+='<td class="'+b._routeIconColumnClass+'">';f+='<div class="'+b._routeIconClass+'">';0===c?(f+=b._getLetter(u),u++):"esriDMTStop"===
a.attributes.maneuverType?f=b._startReturn&&c+1===b.directions.features.length?f+b._getLetter(0):f+b._getLetter(u):"esriDMTDepart"===a.attributes.maneuverType&&(f+=b._getLetter(u),u++);f+="</div>";f+="</td>";f+='<td class="'+b._routeTextColumnClass+'">';f+='<div class="'+b._routeInfoClass+'">';f+='<div class="'+b._routeTextClass+'">';var d=b.directions.strings[c],e;if(d){var i=a.attributes.text;for(e=0;e<d.length;e++)i=b._boldText(i,d[e].string);a.attributes.formattedText=i}else a.attributes.formattedText=
a.attributes.text;f+="<strong>"+z.format(a.attributes.step)+".</strong> "+a.attributes.formattedText;f+="</div>";d=b._formatDistance(a.attributes.length,g.widgets.directions.units[b._getUnits(b.get("directionsLengthUnits"))].abbr);e=b._formatTime(a.attributes.time);d&&(f+='<div class="'+b._routeLengthClass+'">',f+=d,e&&(f+=" "+e),f+="</div>");f+="</div>";f+="</td>";f+="</tr>"});f+="</tbody>";f+="</table>";f+="</div>";if(b._resultsNode)b._resultsNode.innerHTML=f;b._disconnectResults();(c=r("[data-segment]",
b._resultsNode))&&c.length&&c.forEach(function(a){var c=l(a,B.enter,function(){var a=parseInt(k.get(this,"data-segment"),10);b.highlightSegment(a);b.onSegmentHighlight(b.directions.features[a])});b._resultEvents.push(c);c=l(a,"focusin",function(){var a=parseInt(k.get(this,"data-segment"),10);b.highlightSegment(a);b.onSegmentHighlight(b.directions.features[a])});b._resultEvents.push(c);c=l(a,"focusout",function(){b.unhighlightSegment()});b._resultEvents.push(c);c=l(a,B.leave,function(){b.unhighlightSegment()});
b._resultEvents.push(c);b.options.centerAtSegmentStart&&(a=l(a,"click, keydown",function(a){if("click"===a.type||"keydown"===a.type&&a.keyCode===v.ENTER)a=parseInt(k.get(this,"data-segment"),10),b.centerAtSegmentStart(a),b.onSegmentSelect(b.directions.features[a])}),b._resultEvents.push(a))})}b.onDirectionsFinish(a);b._directionsDeferred.resolve(a)},_removeSortId:function(a){(a=p.clone(a))&&a.hasOwnProperty(this._sortId)&&delete a[this._sortId];return a},_removeSortIds:function(a){var b=[];if(a&&
a.length){b=p.clone(a);for(a=0;a<b.length;a++)b[a]=this._removeSortId(b[a])}return b},_setStops:function(){var a=[];this._ignoreStopsWatch=!0;if(this._stops&&this._stops.length){for(a=0;a<this._stops.length;a++)this._stops[a]&&(this._stops[a][this._sortId]=this.geocoders[a][this._sortId]);a=this._removeSortIds(this._stops)}this.set("stops",a);this._ignoreStopsWatch=!1},_getCandidates:function(a){var b=[],c;if(a&&a.length){for(c=0;c<a.length;c++)b.push(this._getCandidate(a[c],c));return E(b)}},_clearResultsHTML:function(){if(this._resultsNode)this._resultsNode.innerHTML=
""},_showSegmentPopup:function(a){if(a&&this.options.showSegmentPopup&&this.options.map&&this.options.map.infoWindow){var b=a.geometry.getPoint(0,0);this.options.map.infoWindow.setFeatures([new s(b,null,a.attributes,this.options.segmentInfoTemplate)]);this.options.map.infoWindow.show(b)}},_removeStopButton:function(a){this._stops.length>this.get("minStops")&&this.removeStop(a)},_updateStopsWatch:function(a,b,c){this.loaded&&!this._ignoreStopsWatch&&this.updateStops(c)},_addStopButton:function(){this.addStop()},
_sortGeocoders:function(){var a=this,b=a._dnd.getAllNodes();a.geocoders.sort(function(c,e){return a._sortGeocodersToNodes(c,e,b,a._sortId)});a._sortStops()},_disconnectResults:function(){var a;if(this._resultEvents.length)for(a=0;a<this._resultEvents.length;a++)this._resultEvents[a].remove()},_formatTime:function(a){var b,c="";b=Math.round(a);a=Math.floor(b/60);b=Math.floor(b%60);a&&(c+=a+" ",c=1<a?c+g.widgets.directions.time.hours:c+g.widgets.directions.time.hour);a&&b&&(c+=" ");b&&(c+=b+" ",c=1<
b?c+g.widgets.directions.time.minutes:c+g.widgets.directions.time.minute);return c},_formatDistance:function(a,b){var c=Math.round(100*a)/100;return 0===c?"":z.format(c)+" "+b},_setMoveSymbol:function(a){this._moveSymbolSet=!0;var b=this._setStopSymbol(a._index,this._stopGraphics.length,!0);a.setSymbol(b)},_unsetMoveSymbol:function(a){var b=this._setStopSymbol(a._index,this._stopGraphics.length);a.setSymbol(b);this._moveSymbolSet=!1},_removeTextGraphic:function(a){this.options.map.graphics.remove(this._textGraphics[a])},
_setDraggableObject:function(a){if(a._drag&&this.options.map&&this.options.map.graphics)this._removeTextGraphic(a._index),this._dragGraphic=a,this._dragGeometry=a.geometry,this._edit.activate(I.MOVE,a)},_setTextGraphic:function(a){if(a._drag&&this.options.map&&this.options.map.graphics){var b=this._textGraphics[a._index];b.setGeometry(a.geometry);this.options.map.graphics.add(b);(a=b.getDojoShape())&&a.moveToFront()}},_unsetDraggableObject:function(a){a._drag&&(this._moveSymbolSet&&this._unsetMoveSymbol(a),
this._setTextGraphic(a),this._edit.deactivate())},_editToolbar:function(){if(this.options.map)this._edit=new I(this.options.map)},_createGlobalGeocoder:function(){var a=new o;if(this.options.map)this.options.geocoderOptions.map=this.options.map;if(!this.options.geocoderOptions.theme)this.options.geocoderOptions.theme=this.get("theme");if(!this.options.geocoderOptions.autoComplete)this.options.geocoderOptions.maxLocations=1;this._globalGeocoder=new D(this.options.geocoderOptions,j.create("div"));this._onEvents.push(this._globalGeocoder.on("load",
function(){a.resolve()}));this._globalGeocoder.startup();return a},_init:function(){var a=this;a._createGlobalGeocoder().then(function(){a._createRouteTask();a._editToolbar();a._setEvents();a.options.canModifyStops||j.destroy(a._addDestinationNode);a._focusOnNewStop=a.options.focusOnNewStop;a.options.stops&&a.addStops(a.options.stops).then(function(){a._focusOnNewStop&&a.geocoders[0].focus()});a.loaded=!0;a.onLoad()})},_calculateValidStops:function(){var a=0,b,c=this._stops;for(b=0;b<c.length;b++)c[b]&&
c[b].name&&a++;return a},_setStopSymbol:function(a,b,c){return 0===a?c&&this.options.fromSymbolDrag?this.options.fromSymbolDrag:this.options.fromSymbol:a===b-1?c&&this.options.toSymbolDrag?this.options.toSymbolDrag:this.options.toSymbol:c&&this.options.stopSymbolDrag?this.options.stopSymbolDrag:this.options.stopSymbol},_setRouteSymbols:function(){var a;for(a=0;a<this.stops.length;a++){var b=this.stops[a];if(b&&b.feature){var c=this._setStopSymbol(a,this.stops.length),e=this._defaultSR;if(this.options.map)e=
this.options.map.spatialReference;var e=new Q(b.feature.geometry.x,b.feature.geometry.y,e),d=this._getLetter(a),d=new T(d,this.options.textSymbolFont,this.options.textSymbolColor);this.options.textSymbolOffset&&d.setOffset(this.options.textSymbolOffset.x,this.options.textSymbolOffset.y);d=new s(e,d);d._textGraphic=!0;d._index=a;b=new s(e,c,{address:b.name},this.options.stopsInfoTemplate);b._drag=!0;b._index=a;this._stopGraphics[a]=b;this._textGraphics[a]=d}}},_addRouteSymbols:function(){var a;if(this._stopGraphics.length&&
this.options.map&&this.options.map.graphics)for(a=0;a<this._stopGraphics.length;a++){this.options.map.graphics.add(this._stopGraphics[a]);var b=this._stopGraphics[a].getDojoShape();b&&b.moveToFront();this.options.map.graphics.add(this._textGraphics[a]);(b=this._textGraphics[a].getDojoShape())&&b.moveToFront()}},_showTrafficLayer:function(){if(this.options.map&&!this._trafficLayer&&this.options.trafficLayer)this._trafficLayer=this.options.map.addLayer(this.options.trafficLayer);this._trafficLayer&&
this._trafficLayer.show()},_hideTrafficLayer:function(){this._trafficLayer&&this._trafficLayer.hide()},_toggleUnits:function(a){a.target===this._useMilesNode?this.set("directionsLengthUnits",n.MILES):a.target===this._useKilometersNode&&this.set("directionsLengthUnits",n.KILOMETERS)},_toggleCheckbox:function(a){var b=k.get(a.target,"checked");a.target===this._findOptimalOrderNode?this.set("useOptimalRoute",b):a.target===this._useTrafficNode?this.set("traffic",b):a.target===this._returnToStartNode&&
this.set("returnToStart",b)},_configureRouteOptions:function(){this._routeParams.directionsLengthUnits=this.get("directionsLengthUnits");this._routeParams.findBestSequence=this.get("useOptimalRoute");this._routeParams.returnStops=this._routeParams.findBestSequence?!0:!1;if(this.get("traffic")){var a=new Date;this._routeParams.startTime=new Date(a.getTime()-6E4*a.getTimezoneOffset());this._showTrafficLayer()}else this._routeParams.startTime=null,this._hideTrafficLayer();if(this.get("returnToStart")&&
this._stopGraphics.length){var a=new s(this._stopGraphics[0].geometry,null,this._stopGraphics[0].attributes),b=this._stopGraphics.slice(0);this._startReturn=a;b.push(a);this._routeParams.stops.features=b}else this._startReturn=null,this._routeParams.stops.features=this._stopGraphics},_configureRoute:function(){var a=this;a._setRouteSymbols();a._configureRouteOptions();a.set("directions",null);a._routeTask.solve(a._routeParams,function(b){a._showRoute(b)},function(b){a._routeTaskError(b)})},_boldText:function(a,
b){return a.replace(RegExp("(^|\\s)("+b+")(\\s|$)","ig"),"$1<strong>$2</strong>$3")},_clearStopGraphics:function(){var a;if(this._stopGraphics.length&&this.options.map&&this.options.map.graphics)for(a=0;a<this._stopGraphics.length;a++)this.options.map.graphics.remove(this._stopGraphics[a]),this.options.map.graphics.remove(this._textGraphics[a]);this._stopGraphics=[];this._textGraphics=[]},_clearRouteGraphics:function(){this.get("mergedRouteGraphic")&&this.options.map&&this.options.map.graphics&&(this.options.map.graphics.remove(this.get("mergedRouteGraphic")),
this.set("mergedRouteGraphic",null));this.unhighlightSegment()},_clearInfoWindow:function(){this.options.map&&this.options.map.infoWindow&&(this.options.map.infoWindow.hide(),this.options.map.infoWindow.features&&this.options.map.infoWindow.clearFeatures())},_getLetter:function(a){var b=this.options.alphabet,c="";b&&b.length&&(a||(a=0),a>=b.length&&(a=b.length-1),"string"===typeof b?c=b.substr(a,1):b instanceof Array&&(c=b[a]));return c},_directionsButton:function(){var a=this;a._removeEmptyStops();
a.getDirections().then(function(){a.zoomToFullRoute()})},_fixIcons:function(){var a,b=this._dnd.getAllNodes();for(a=0;a<b.length;a++){var c=r("."+this._stopIconClass,b[a])[0];if(c)c.innerHTML=this._getLetter(a);h.remove(b[a],this._stopOriginClass+" "+this._stopDestinationClass);0===a?h.add(b[a],this._stopOriginClass):a===b.length-1&&h.add(b[a],this._stopDestinationClass)}this.options.showReverseStopsButton&&(a=r("[data-reverse-td]",this._dndNode)[0],j.destroy(a),j.create("td",{"data-reverse-td":"true",
rowspan:b.length,className:this._esriStopReverseColumnClass,innerHTML:'<div role="button" class="'+this._reverseStopsClass+'" data-reverse-stops="true" title="'+g.widgets.directions.reverseDirections+'"></div>'},b[0]))},_setEvents:function(){var a=this,b=l(a._dndNode,"[data-reverse-stops]:click, [data-reverse-stops]:keydown",function(b){("click"===b.type||"keydown"===b.type&&b.keyCode===v.ENTER)&&a._reverseStops()});a._onEvents.push(b);b=l(a._resultsNode,"[data-print-directions]:click, [data-print-directions]:keydown",
function(b){("click"===b.type||"keydown"===b.type&&b.keyCode===v.ENTER)&&a._printDirections()});a._onEvents.push(b);b=l(a._resultsNode,"[data-full-route]:click, [data-full-route]:keydown",function(b){("click"===b.type||"keydown"===b.type&&b.keyCode===v.ENTER)&&a.zoomToFullRoute()});a._onEvents.push(b);b=l(a._dndNode,"[data-remove]:click, [data-remove]:keydown",function(b){if("click"===b.type||"keydown"===b.type&&b.keyCode===v.ENTER)b=r("[data-remove]",a._dndNode),b=q.indexOf(b,this),a._removeStopButton(b)});
a._onEvents.push(b);b=l(a._dnd,"Drop",function(){a._dnd.sync();a._sortGeocoders();a._fixIcons();a.onUpdateStops(a.get("stops"));a._calculateValidStops()===a.geocoders.length&&a._routeParams.stops.features.length&&a.get("autoSolve")&&a.getDirections().then(function(){a.zoomToFullRoute()})});a._onEvents.push(b);b=l(a._dnd,"DndStart",function(){var b=r("body")[0];h.add(b,a._dndDragBodyClass)});a._onEvents.push(b);b=l(a._dnd,"DndDrop, DndCancel",function(){var b=r("body")[0];h.remove(b,a._dndDragBodyClass)});
a._onEvents.push(b);a.options.map&&a.options.map.graphics&&(a.options.dragging&&(b=a.options.map.graphics.on("mouse-over",function(b){var e;b.graphic._drag?(e=a._edit.getCurrentState(),e.graphic||a._setDraggableObject(b.graphic),a._moveSymbolSet||a._setMoveSymbol(b.graphic)):b.graphic._textGraphic&&(e=a._edit.getCurrentState(),a._stopGraphics[b.graphic._index]&&(e.graphic||a._setDraggableObject(a._stopGraphics[b.graphic._index]),a._moveSymbolSet||a._setMoveSymbol(a._stopGraphics[b.graphic._index])))}),
a._onEvents.push(b),b=a.options.map.graphics.on("mouse-out",function(b){!a._moveInProgress&&b.graphic._drag&&a._unsetDraggableObject(b.graphic)}),a._onEvents.push(b)),b=w.connect(a._edit,"onGraphicClick",function(b){a.options.map&&a.options.map.infoWindow&&(a.options.map.infoWindow.setFeatures([b]),a.options.map.infoWindow.show(b.geometry))}),a._connectEvents.push(b),b=w.connect(a._edit,"onGraphicFirstMove",function(){a._moveInProgress=!0}),a._connectEvents.push(b),b=w.connect(a._edit,"onGraphicMoveStop",
function(b){a._moveInProgress=!1;a._unsetDraggableObject(b);if(a._dragGeometry!==b.geometry)a._currentEditableGraphic=b,a.get("autoSolve")&&(a.onDirectionsStart(),a._clearInfoWindow(),a._clearResultsHTML()),a._globalGeocoder.find(b.geometry).then(function(b){b&&b.results.length?a._setReverseGeocode(b.results[0]):a._reverseGeocodeError(Error(g.widgets.directions.error.locator))},function(b){a._reverseGeocodeError(b)})}),a._connectEvents.push(b))},_reverseGeocodeError:function(a){var b=this;b.onDirectionsFinish(a);
a=g.widgets.directions.error.locator;b._resultError(a);b._clearRouteGraphics();b._currentEditableGraphic.setAttributes({error:a});b._updateStop({name:""},b._currentEditableGraphic._index).then(function(a,e){b.onUpdateStops(a,e)})},_routeTaskError:function(a){this._resultError(g.widgets.directions.error.routeTask);this._directionsDeferred.reject(a);this.onDirectionsFinish(a)},_clearResultError:function(){this._errors=[];if(this._errorNode)this._errorNode.innerHTML=""},_resultError:function(a){var b=
"";this._errors.push(a);b+='<div class="'+this._routesErrorClass+'">';if(this._errors.length){b+="<ul>";for(a=0;a<this._errors.length;a++)b+="<li>"+this._errors[a]+"</li>";b+="</ul>"}if(this._errorNode)this._errorNode.innerHTML=b+"</div>"},_getUnits:function(a){switch(a){case n.KILOMETERS:return"KILOMETERS";case n.METERS:return"METERS";case n.NAUTICAL_MILES:return"NAUTICAL_MILES";default:return"MILES"}},_createRouteTask:function(){this._routeTask=new W(this.options.routeTaskUrl);this._routeParams=
new X;var a={returnRoutes:!1},b={directionsOutputType:"complete",stops:new V,returnDirections:!0,doNotLocateOnRestrictedElements:!0};b.outSpatialReference=this.options.map?this.options.map.spatialReference:this._defaultSR;this.options.routeParams&&p.mixin(this._routeParams,a,this.options.routeParams,b);this._configureRouteOptions()},_reverseStops:function(){var a=this,b=a._dnd.getAllNodes();b.length&&(b.reverse(),a._dnd.clearItems(),a._dnd.insertNodes(!1,b),a._dnd.sync(),a._stopsRemovable(),a._optionsMenu(),
a._checkMaxStops(),a._fixIcons(),a._sortGeocoders(),a.onUpdateStops(a.get("stops")),a.get("autoSolve")&&a.getDirections().then(function(){a.zoomToFullRoute()}))},_setTemplates:function(){this._routeTpl="";this._routeTpl+='<div class="${maneuverType}">';this._routeTpl+='<div class="'+this._routeIconClass+" "+this._infoWindowRouteClass+'">';this._routeTpl+="<strong>${step}.</strong> ${formattedText}";this._routeTpl+="</div>";this._routeTpl+="</div>";this._stopTpl="${address}${error}"},_setClasses:function(){this._widgetContainerClass=
"esriDirectionsContainer";this._stopsContainerClass="esriStopsContainer";this._reverseStopsClass="esriStopsReverse";this._addStopsClass="esriStopsAdd";this._stopsClass="esriStops";this._stopsRemovableClass="esriStopsRemovable";this._stopsButtonContainerClass="esriStopsButtons";this._stopsOptionsButtonClass="esriStopsOptionsButton";this._stopsAddDestinationClass="esriStopsAddDestination";this._stopsGetDirectionsContainerClass="esriStopsGetDirectionsContainer";this._stopsGetDirectionsClass="esriStopsGetDirections";
this._stopsClearDirectionsClass="esriStopsClearDirections";this._stopsOptionsOptionsEnabledClass="esriStopsOptionsEnabled";this._stopsOptionsMenuClass="esriStopsOptionsMenu";this._stopsFindOptimalOrderClass="esriFindOptimalOrderOption";this._stopsUseTrafficClass="esriUseTrafficOption";this._stopsReturnToStartClass="esriReturnToStartOption";this._stopsOptionsCheckboxesClass="esriOptionsCheckboxes";this._stopsOptionsUnitsClass="esriOptionsUnits";this._stopClass="esriStop";this._stopOriginClass="esriStopOrigin";
this._stopDestinationClass="esriStopDestination";this._esriStopGeocoderColumnClass="esriStopGeocoderColumn";this._esriStopReverseColumnClass="esriStopReverseColumn";this._stopIconColumnClass="esriStopIconColumn";this._stopIconClass="esriStopIcon";this._stopIconRemoveColumnClass="esriStopIconRemoveColumn";this._stopIconRemoveClass="esriStopIconRemove";this._resultsContainerClass="esriResultsContainer";this._resultsLoadingClass="esriResultsLoading";this._resultsPrintClass="esriResultsPrint";this._resultsSummaryClass=
"esriResultsSummary";this._resultsViewFullRouteClass="esriResultsViewFullRoute";this._resultsRouteNameClass="esriResultsRouteName";this._resultsRouteButtonContainerClass="esriResultsButtonsContainer";this._routesContainerClass="esriRoutesContainer";this._routesClass="esriRoutes";this._routesErrorClass="esriRoutesError";this._routeClass="esriRoute";this._routeTextColumnClass="esriRouteTextColumn";this._routeTextClass="esriRouteText";this._routeLengthClass="esriRouteLength";this._routeOriginClass="esriDMTStopOrigin";
this._routeDestinationClass="esriDMTStopDestination";this._routeLastClass="esriDMTStopLast";this._routeInfoClass="esriRouteInfo";this._routeIconColumnClass="esriRouteIconColumn";this._routeIconClass="esriRouteIcon";this._infoWindowRouteClass="esriInfoWindowRoute";this._routeZoomClass="esriRouteZoom";this._esriPrintPageClass="esriPrintPage";this._esriPrintBarClass="esriPrintBar";this._esriPrintButtonClass="esriPrintButton";this._esriCloseButtonClass="esriCloseButton";this._esriPrintMainClass="esriPrintMain";
this._esriPrintHeaderClass="esriPrintHeader";this._esriPrintLogoClass="esriPrintLogo";this._esriPrintNameClass="esriPrintName";this._esriPrintNotesClass="esriPrintNotes";this._esriPrintLengthClass="esriPrintLength";this._esriPrintDirectionsClass="esriPrintDirections";this._esriPrintFooterClass="esriPrintFooter";this._esriPrintStopLabelClass="esriPrintStopLabel";this._clearClass="esriClear";this._dndDragBodyClass="esriDndDragDirection"},_setPrivateDefaults:function(){this._sortId="_dndId";this._stops=
[];this._i18n=g;this._onEvents=[];this._connectEvents=[];this._watchEvents=[];this._geocoderSelectEvents=[];this._geocoderFindEvents=[];this._geocoderWatchEvents=[];this._resultEvents=[];this._stopGraphics=[];this._textGraphics=[];this._errors=[];this._defaultSR=new P(4326)},_sortGeocodersToNodes:function(a,b,c,e){b=b[e];a=C.byId(a[e]);e=C.byId(b);a=q.indexOf(c,a);e=q.indexOf(c,e);for(b=0;b<c.length;b++){if(b===a)return-1;if(b===e)return 1}},_setOptions:function(){var a=this.get("optimalRoute")||
!1;this._findOptimalOrderNode&&k.set(this._findOptimalOrderNode,"checked",a);a=this.get("returnToStart")||!1;this._returnToStartNode&&k.set(this._returnToStartNode,"checked",a);a=this.get("traffic")||!1;this._useTrafficNode&&k.set(this._useTrafficNode,"checked",a);switch(this.get("directionsLengthUnits")){case n.KILOMETERS:k.set(this._useKilometersNode,"checked",!0);k.set(this._useMilesNode,"checked",!1);break;case n.MILES:k.set(this._useKilometersNode,"checked",!1),k.set(this._useMilesNode,"checked",
!0)}},_widgetProperties:function(){this.set("theme",this.options.theme);this.set("showTrafficOption",this.options.showTrafficOption);this.set("showReturnToStartOption",this.options.showReturnToStartOption);this.set("showUseOptimalRouteOption",this.options.showUseOptimalRouteOption);this.set("optimalRoute",this.options.useOptimalRoute);this.set("returnToStart",this.options.returnToStart);this.set("traffic",this.options.traffic);this.set("minStops",this.options.minStops);this.set("maxStops",this.options.maxStops);
this.set("printPage",this.options.printPage);this.set("autoSolve",this.options.autoSolve);var a=n.KILOMETERS;this.options.routeParams.directionsLengthUnits?a=this.options.routeParams.directionsLengthUnits:this.options.routeParams.directionsLanguage&&(a="en"===this.options.routeParams.directionsLanguage?n.MILES:n.KILOMETERS);this.set("directionsLengthUnits",a)},_optionsMenu:function(){this._useTrafficItemNode&&(this.get("showTrafficOption")?m.set(this._useTrafficItemNode,"display","block"):m.set(this._useTrafficItemNode,
"display","none"));this._returnToStartItemNode&&(this.get("showReturnToStartOption")?m.set(this._returnToStartItemNode,"display","block"):m.set(this._returnToStartItemNode,"display","none"));this._findOptimalOrderItemNode&&(this.get("showUseOptimalRouteOption")&&4<=this._stops.length?m.set(this._findOptimalOrderItemNode,"display","block"):m.set(this._findOptimalOrderItemNode,"display","none"));this._stops.length>=this.get("minStops")?h.add(this._widgetContainer,this._stopsOptionsOptionsEnabledClass):
(h.remove(this._widgetContainer,this._stopsOptionsOptionsEnabledClass),this._optionsMenuNode&&"block"===m.get(this._optionsMenuNode,"display")&&this._toggleOptionsMenu(),this.loaded&&this._configureRouteOptions())},_stopsRemovable:function(){this.geocoders.length>this.get("minStops")?h.add(this._widgetContainer,this._stopsRemovableClass):h.remove(this._widgetContainer,this._stopsRemovableClass)},_checkMaxStops:function(){this._stops.length<this.get("maxStops")?(this._showAddDestination(),this.set("maxStopsReached",
!1)):(this._hideAddDestination(),this.set("maxStopsReached",!0))},_updateThemeWatch:function(a,b,c){this.loaded&&(h.remove(this.domNode,b),h.add(this.domNode,c))},_toggleOptionsMenu:function(){if(this._optionsMenuNode)"block"===m.get(this._optionsMenuNode,"display")?(m.set(this._optionsMenuNode,"display","none"),this._optionsButtonNode.innerHTML=g.widgets.directions.showOptions):(m.set(this._optionsMenuNode,"display","block"),this._optionsButtonNode.innerHTML=g.widgets.directions.hideOptions)},_hideAddDestination:function(){h.remove(this._widgetContainer,
this._addStopsClass)},_showAddDestination:function(){h.add(this._widgetContainer,this._addStopsClass)},_getAbsoluteUrl:function(){var a=A.toUrl("esri/dijit");if(/^https?\:/i.test(a))return a;if(/^\/\//i.test(a))return window.location.protocol+a;if(/^\//i.test(a))return window.location.protocol+"//"+window.location.host+a},_getManeuverImage:function(a){if(a){var b=this._getAbsoluteUrl()+"/images/Directions/maneuvers/";return"esriDMTStop"===a||"esriDMTDepart"===a?"":b+a+".png"}return""},_loadPrintDirections:function(){var a=
this,b=a._getAbsoluteUrl()+"/css/Directions.css",c=a._getAbsoluteUrl()+"/css/DirectionsPrint.css",e;e=M.isBodyLtr()?"ltr":"rtl";var d="",d=d+"<!DOCTYPE HTML>",d=d+('<html lang="en" class="'+a.get("theme")+'" dir="'+e+'">'),d=d+"<head>",d=d+'<meta charset="utf-8">',d=d+'<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">',d=d+("<title>"+a.directions.routeName+"</title>"),d=d+('<link rel="stylesheet" media="screen" type="text/css" href="'+b+'" />'),d=d+('<link rel="stylesheet" media="print" type="text/css" href="'+
c+'" />'),d=d+"</head>",d=d+('<body class="'+a._esriPrintPageClass+'">'),d=d+('<div class="'+a._esriPrintBarClass+'">'),d=d+('<div class="'+a._esriCloseButtonClass+'" title="'+g.common.close+'" onclick="window.close();">'+g.common.close+"</div>"),d=d+('<div id="printButton" class="'+a._esriPrintButtonClass+'" title="'+g.widgets.directions.print+'" onclick="window.print();">'+g.widgets.directions.print+"</div>"),d=d+"</div>",d=d+('<div class="'+a._esriPrintMainClass+'">'),d=d+('<div class="'+a._esriPrintHeaderClass+
'">'),d=d+('<img class="'+a._esriPrintLogoClass+'" src="https://www.arcgis.com/about/graphics/logo-esri.png" />'),d=d+('<div class="'+a._esriPrintNameClass+'">'+a.directions.routeName+"</div>"),d=d+('<div class="'+a._esriPrintLengthClass+'">'+a._formatDistance(a.directions.totalLength,g.widgets.directions.units[a._getUnits(a.get("directionsLengthUnits"))].name)+". "+a._formatTime(a.directions.totalTime)+"</div>"),d=d+'<div id="print_helper"></div>',d=d+('<textarea onkeyup="document.getElementById(\'print_helper\').innerHTML=this.value;" id="print_area" class="'+
a._esriPrintNotesClass+'" placeholder="'+g.widgets.directions.printNotes+'"></textarea>'),d=d+('<div class="'+a._clearClass+'"></div>'),d=d+"</div>",d=d+('<div class="'+a._esriPrintDirectionsClass+'">'),d=d+"<table>",d=d+"<tbody>",h=0;q.forEach(a.directions.features,function(b,c){var e=a.directions.strings[c],j;if(e){var l=b.attributes.text;for(j=0;j<e.length;j++)l=a._boldText(l,e[j].string);b.attributes.formattedText=l}else b.attributes.formattedText=b.attributes.text;e="";if(a.directions.features.length===
c+1)e=a._routeLastClass;if(b.attributes)b.attributes.step=c+1;d+='<tr class="'+e+'">';d+='<td class="'+a._routeIconColumnClass+'">';var e=a._getManeuverImage(b.attributes.maneuverType),k;0===c?(k=a._getLetter(h),h++):"esriDMTStop"===b.attributes.maneuverType?k=a._getLetter(h):"esriDMTDepart"===b.attributes.maneuverType&&(k=a._getLetter(h),h++);e?d+='<img src="'+e+'" />':k&&(d+='<div class="'+a._esriPrintStopLabelClass+'">',d+=k,d+="</div>");d+="</td>";d+='<td class="'+a._routeTextColumnClass+'">';
d+="<div><strong>"+z.format(b.attributes.step)+".</strong> "+b.attributes.formattedText+"</div>";d+="</td>";d+='<td class="'+a._routeTextColumnClass+'">';d+='<div class="'+a._routeLengthClass+'">'+a._formatDistance(b.attributes.length,g.widgets.directions.units[a._getUnits(a.get("directionsLengthUnits"))].abbr)+"</div>";d+="</td>";d+="</tr>"});d+="</tbody>";d+="</table>";d+="</div>";d+='<div class="'+a._esriPrintFooterClass+'">';d+="<p>"+g.widgets.directions.printDisclaimer+"</p>";d+="</div>";d+=
"</div>";d+="</body>";d+="</html>";a._printWindow.document.open("text/html","replace");a._printWindow.document.write(d);a._printWindow.document.close()},_printDirections:function(){var a=screen.width/2,b=screen.height/1.5,a="toolbar=no, location=no, directories=no, status=yes, menubar=no, scrollbars=yes, resizable=yes, width="+a+", height="+b+", top="+(screen.height/2-b/2)+", left="+(screen.width/2-a/2);this.printPage?(window.directions=this.directions,window.open(this.printPage,"directions_widget_print",
a,!0)):(this._printWindow=window.open("","directions_widget_print",a,!0),this._loadPrintDirections())}})});