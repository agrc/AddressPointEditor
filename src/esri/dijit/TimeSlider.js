//>>built
require({cache:{"url:dojox/form/resources/HorizontalRangeSlider.html":'<table class="dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider" cellspacing="0" cellpadding="0" border="0" rules="none" dojoAttachEvent="onkeypress:_onKeyPress,onkeyup:_onKeyUp" role="presentation"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderDecrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="decrementButton"><span class="dijitSliderButtonInner">-</span></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent="onmousedown:_onClkDecBumper"></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><input dojoAttachPoint="valueNode" type="hidden" ${!nameAttrSetting}\n\t\t\t/><div role="presentation" class="dojoxRangeSliderBarContainer" dojoAttachPoint="sliderBarContainer"\n\t\t\t\t><div dojoAttachPoint="sliderHandle" tabIndex="${tabIndex}" class="dijitSliderMoveable dijitSliderMoveableH" dojoAttachEvent="onmousedown:_onHandleClick" role="slider"\n\t\t\t\t\t><div class="dijitSliderImageHandle dijitSliderImageHandleH"></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" dojoAttachPoint="progressBar,focusNode" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent="onmousedown:_onBarClick"></div\n\t\t\t\t><div dojoAttachPoint="sliderHandleMax" tabIndex="${tabIndex}" class="dijitSliderMoveable dijitSliderMoveableH" dojoAttachEvent="onmousedown:_onHandleClickMax" role="slider"\n\t\t\t\t\t><div class="dijitSliderImageHandle dijitSliderImageHandleH"></div\n\t\t\t\t></div\n\t\t\t\t><div role="presentation" dojoAttachPoint="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent="onmousedown:_onRemainingBarClick"></div\n\t\t\t></div\n\t\t></td\n\t\t><td class="dijitReset"\n\t\t\t><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent="onmousedown:_onClkIncBumper"></div\n\t\t></td\n\t\t><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\n\t\t\t><div class="dijitSliderIncrementIconH" tabIndex="-1" style="display:none" dojoAttachPoint="incrementButton"><span class="dijitSliderButtonInner">+</span></div\n\t\t></td\n\t></tr\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset" colspan="2"></td\n\t\t><td dojoAttachPoint="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td\n\t\t><td class="dijitReset" colspan="2"></td\n\t></tr\n></table>\n',
"url:esri/dijit/templates/TimeSlider.html":'   <div class="esriTimeSlider">\r\n   <table width="100%" cellspacing="0" cellpadding="0" border="0">\r\n   <tr>\r\n   <td align="right" valign="middle"><button dojoType="dijit.form.Button" showLabel="false" iconClass="tsButton tsPlayButton" dojoAttachEvent="onClick:_onPlay" dojoAttachPoint="playPauseBtn" type="button">${NLS_play}</button></td>\r\n   <td align="center" valign="middle" width="80%" class="tsTmp"></td>\r\n   <td align="left" valign="middle" width="30"><button dojoType="dijit.form.Button" showLabel="false" iconClass="tsButton tsPrevButton" dojoAttachEvent="onClick:_onPrev" dojoAttachPoint="previousBtn" type="button">${NLS_previous}</button></td>\r\n   <td align="left" valign="middle"><button dojoType="dijit.form.Button" showLabel="false" iconClass="tsButton tsNextButton" dojoAttachEvent="onClick:_onNext" dojoAttachPoint="nextBtn" type="button">${NLS_next}</button></td>\r\n   </tr>    \r\n   </table>\r\n   </div>'}});
define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/query","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dijit/_Widget","dijit/_Templated","dijit/form/HorizontalSlider","dijit/form/HorizontalRule","dijit/form/HorizontalRuleLabels","dojox/timing/_base","dojox/form/RangeSlider","dojo/text!dojox/form/resources/HorizontalRangeSlider.html","esri/kernel","esri/lang","esri/TimeExtent","esri/dijit/_EventedWidget","dojo/text!esri/dijit/templates/TimeSlider.html","dojo/i18n!esri/nls/jsapi"],
function(m,h,c,i,j,z,A,k,f,n,o,p,l,q,r,s,t,u,B,v,g,w,x,y){return h([w,o,p],{declaredClass:"esri.dijit.TimeSlider",widgetsInTemplate:!0,templateString:x,basePath:m.toUrl("esri/dijit")+"/",_slideDuration:1E3,_defaultCount:10,_eventMap:{"time-extent-change":!0,play:!0,pause:!0,next:!0,previous:!0},constructor:function(a){c.mixin(this,y.widgets.timeSlider);this._iconClass="tsButton tsPlayButton";this.loop=this.playing=!1;this.thumbCount=1;this.thumbMovingRate=1E3;this._createTimeInstants=!1;this._options=
c.mixin({excludeDataAtTrailingThumb:!1,excludeDataAtLeadingThumb:!1},a.options||{})},startup:function(){this.inherited(arguments);this._timer=new s.Timer;this._timer.setInterval(this.thumbMovingRate);this._timer.onTick=c.hitch(this,"_bumpSlider",1);this._createSlider()},destroy:function(){this._timer.stop();this.timeStops=this._timer=null;this._slider.destroy();this._slider=null;if(this._hTicks)this._hTicks.destroyRecursive(),this._hTicks=null;if(this._hLabels)this._hLabels.destroyRecursive(),this._hLabels=
null;this.inherited(arguments)},onTimeExtentChange:function(){},onPlay:function(){},onPause:function(){},onNext:function(){},onPrevious:function(){},_onHorizontalChange:function(){this.onTimeExtentChange(this._sliderToTimeExtent())},_onPlay:function(){this.playing=!this.playing;this._updateUI();this.playing?(this._timer.start(),this.onPlay(this._sliderToTimeExtent())):(this._timer.stop(),this.onPause(this._sliderToTimeExtent()));var a=this._getSliderValue();this._offset=c.isArray(a)?a[1]-a[0]:0},
_onNext:function(){this.playing||(this._bumpSlider(1),this.onNext(this._sliderToTimeExtent()))},_onPrev:function(){this.playing||(this._bumpSlider(-1),this.onPrevious(this._sliderToTimeExtent()))},createTimeStopsByCount:function(a,b){if(!a||!a.startTime||!a.endTime)console.log(this.NLS_invalidTimeExtent);else{var b=b||this._defaultCount,c=Math.ceil((a.endTime-a.startTime)/(b-1));this.createTimeStopsByTimeInterval(a,c,"esriTimeUnitsMilliseconds")}},createTimeStopsByTimeInterval:function(a,b,c,d){if(!a||
!a.startTime||!a.endTime)console.log(this.NLS_invalidTimeExtent);else{this.fullTimeExtent=new g(a.startTime,a.endTime);d&&!0===d.resetStartTime&&this._resetStartTime(this.fullTimeExtent,c);this._timeIntervalUnits=c;for(var d=this.fullTimeExtent.startTime,e=[];d<=a.endTime;)e.push(d),d=a._getOffsettedDate(d,b,c);0<e.length&&e[e.length-1]<a.endTime&&e.push(d);this.setTimeStops(e)}},getCurrentTimeExtent:function(){return this._sliderToTimeExtent()},setTimeStops:function(a){this.timeStops=a||[];this._numTicks=
this._numStops=this.timeStops.length;if(!1===v.isDefined(this.fullTimeExtent))this.fullTimeExtent=new g(a[0],a[a.length-1])},setLoop:function(a){this.loop=a},setThumbCount:function(a){this.thumbCount=a;this.singleThumbAsTimeInstant(this._createTimeInstants);this._slider&&this._createSlider()},setThumbIndexes:function(a){this.thumbIndexes=c.clone(a)||[0,1];this._initializeThumbs()},setThumbMovingRate:function(a){this.thumbMovingRate=a;this._timer&&this._timer.setInterval(this.thumbMovingRate)},setLabels:function(a){this.labels=
a;this._slider&&this._createSlider()},setTickCount:function(a){this._numTicks=a;this._slider&&this._createSlider()},singleThumbAsTimeInstant:function(a){this._createTimeInstants=a&&1===this.thumbCount},next:function(){this._onNext()},pause:function(){this.playing=!1;this._updateUI();this._timer.stop()},play:function(){if(!0!==this.playing)this.playing=!1,this._onPlay()},previous:function(){this._onPrev()},_updateUI:function(){k.remove(this.playPauseBtn.iconNode,this._iconClass);this._iconClass=this.playing?
"tsButton tsPauseButton":"tsButton tsPlayButton";k.add(this.playPauseBtn.iconNode,this._iconClass);this.previousBtn.set("disabled",this.playing);this.nextBtn.set("disabled",this.playing)},_createSlider:function(){if(this._slider)this._slider.destroy(),this._slider=null;for(var a=this.domNode;a.parentNode&&!a.dir;)a=a.parentNode;a={onChange:c.hitch(this,"_onHorizontalChange"),showButtons:!1,discreteValues:this._numStops,slideDuration:this._slideDuration,"class":"ts",dir:a.dir};this._ts=f.create("div",
{},j.query(".tsTmp",this.domNode)[0],"first");this._timeSliderTicks=f.create("div",{},this._ts,"first");this._timeSliderLabels=f.create("div",{},this._ts);2===this.thumbCount?this._createRangeSlider(a):this._createSingleSlider(a);this.thumbIndexes=this.thumbIndexes||[0,1];this._createHorizRule();this._createLabels();!0===this._createTimeInstants&&j.query(".dijitSliderProgressBarH, .dijitSliderLeftBumper, .dijitSliderRightBumper").forEach(function(a){n.set(a,{background:"none"})});this._initializeThumbs();
i.disconnect(this._onChangeConnect);this._onChangeConnect=i.connect(this._slider,"onChange",c.hitch(this,"_updateThumbIndexes"))},_createRangeSlider:function(a){this._isRangeSlider=!0;this._slider=new (h([l,t],{templateString:u}))(a,this._ts)},_createSingleSlider:function(a){this._isRangeSlider=!1;this._slider=new l(a,this._ts)},_createHorizRule:function(){if(this._hTicks)this._hTicks.destroyRecursive(),this._hTicks=null;if(!(2>this._numTicks))this._hTicks=new q({container:"topDecoration",ruleStyle:"",
"class":"tsTicks",count:this._numTicks},this._timeSliderTicks)},_createLabels:function(){if(this._hLabels)this._hLabels.destroyRecursive(),this._hLabels=null;if(this.labels&&0<this.labels.length)this._hLabels=new r({labels:this.labels,labelStyle:"","class":"tsLabels"},this._timeSliderLabels)},_initializeThumbs:function(){if(this._slider){this._offset=this._toSliderValue(this.thumbIndexes[1])||0;var a=this._toSliderValue(this.thumbIndexes[0]),a=a>this._slider.maximum||a<this._slider.minimum?this._slider.minimum:
a;if(!0===this._isRangeSlider){var b=this._toSliderValue(this.thumbIndexes[1]),b=b>this._slider.maximum||b<this._slider.minimum?this._slider.maximum:b;this._setSliderValue([a,b<a?a:b])}else this._setSliderValue(a);this._onHorizontalChange()}},_bumpSlider:function(a){var b=this._getSliderValue(),f=b,d=f,e=a;c.isArray(b)&&(d=b[0],f=b[1],e=[{change:a,useMaxValue:!0},{change:a,useMaxValue:!1}]);if(1.0E-10>Math.abs(d-this._slider.minimum)&&0>a||1.0E-10>Math.abs(f-this._slider.maximum)&&0<a){if(this._timer.isRunning)this.loop?
(this._timer.stop(),this._setSliderValue(this._getSliderMinValue()),this.onTimeExtentChange(this._sliderToTimeExtent()),this._timer.start(),this.playing=!0):this.pause()}else this._slider._bumpValue(e)},_updateThumbIndexes:function(){var a=this._getSliderValue();c.isArray(a)?(this.thumbIndexes[0]=this._toSliderIndex(a[0]),this.thumbIndexes[1]=this._toSliderIndex(a[1])):this.thumbIndexes[0]=this._toSliderIndex(a)},_sliderToTimeExtent:function(){if(this.timeStops&&0!==this.timeStops.length){var a=new g,
b=this._getSliderValue();c.isArray(b)?(a.startTime=new Date(this.timeStops[this._toSliderIndex(b[0])]),a.endTime=new Date(this.timeStops[this._toSliderIndex(b[1])]),this._adjustTimeExtent(a)):(a.startTime=!0===this._createTimeInstants?new Date(this.timeStops[this._toSliderIndex(b)]):new Date(this.fullTimeExtent.startTime),a.endTime=!0===this._createTimeInstants?a.startTime:new Date(this.timeStops[this._toSliderIndex(b)]));return a}},_adjustTimeExtent:function(a){if(!(!1===this._options.excludeDataAtTrailingThumb&&
!1===this._options.excludeDataAtLeadingThumb||a.startTime.getTime()===a.endTime.getTime())){if(this._options.excludeDataAtTrailingThumb){var b=a.startTime;b.setUTCSeconds(b.getUTCSeconds()+1)}if(this._options.excludeDataAtLeadingThumb)a=a.endTime,a.setUTCSeconds(a.getUTCSeconds()-1)}},_resetStartTime:function(a,b){switch(b){case "esriTimeUnitsSeconds":a.startTime.setUTCMilliseconds(0);break;case "esriTimeUnitsMinutes":a.startTime.setUTCSeconds(0,0,0);break;case "esriTimeUnitsHours":a.startTime.setUTCMinutes(0,
0,0);break;case "esriTimeUnitsDays":a.startTime.setUTCHours(0,0,0,0);break;case "esriTimeUnitsWeeks":a.startTime.setUTCDate(a.startTime.getUTCDate()-a.startTime.getUTCDay());break;case "esriTimeUnitsMonths":a.startTime.setUTCDate(1);a.startTime.setUTCHours(0,0,0,0);break;case "esriTimeUnitsDecades":a.startTime.setUTCFullYear(a.startTime.getUTCFullYear()-a.startTime.getUTCFullYear()%10);break;case "esriTimeUnitsCenturies":a.startTime.setUTCFullYear(a.startTime.getUTCFullYear()-a.startTime.getUTCFullYear()%
100)}},_getSliderMinValue:function(){return this._isRangeSlider?[this._slider.minimum,this._slider.minimum+this._offset]:this._slider.minimum},_toSliderIndex:function(a){a=Math.floor((a-this._slider.minimum)*this._numStops/(this._slider.maximum-this._slider.minimum));0>a&&(a=0);a>=this._numStops&&(a=this._numStops-1);return a},_toSliderValue:function(a){return a*(this._slider.maximum-this._slider.minimum)/(this._numStops-1)+this._slider.minimum},_getSliderValue:function(){return this._slider.get("value")},
_setSliderValue:function(a){this._slider._setValueAttr(a,!1,!1)}})});